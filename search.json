[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Présentations codification automatique de l'APE",
    "section": "",
    "text": "Tous les supports sont accessibles et modifiables sur Github InseeFrLab \n\n\n\n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Séminaire interne du département des méthodes statistiques de l'Insee\n\n            \n\n            \n            \n              \n                Thomas Faria et Tom Seimandi\n                Sep 1, 2023\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Présentation lors de l'évènement de lancement du SSP Hub\n\n            \n\n            \n            \n              \n                Thomas Faria et Tom Seimandi\n                Apr 17, 2023\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Presentation given during the UNECE Machine Learning for Official Statistics Workshop 2023\n\n            \n\n            \n            \n              \n                Thomas Faria and Tom Seimandi\n                Jun 5, 2023\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Présentation pour la formation Big Data donné à la BCEAO à Dakar\n\n            \n\n            \n            \n              \n                Romain Avouac, Thomas Faria et Tom Seimandi\n                Sep 27, 2023\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Slides used for an exchange with StatCan on MLOps\n\n            \n\n            \n            \n              \n                Romain Avouac, Thomas Faria et Tom Seimandi\n                Mar 19, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Presentation given during the NACE implementation webinar\n\n            \n\n            \n            \n              \n                Nathan Randriamanana\n                Apr 30, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Codification automatique de l'APE à l'Insee\n\n            \n\n            \n            \n              \n                Thomas Faria et Nathan Randriamanana\n                May 7, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Retraining strategies for an economic activity classification model\n\n            \n\n            \n            \n              \n                Thomas Faria, Nathan Randriamanana, Tom Seimandi\n                May 24, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n                \n                  \n                    \n                      \n                        Paper\n                      \n                    \n                  \n                \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025\n\n            \n\n            \n            \n              \n                Thomas Faria, Nathan Randriamanana\n                Nov 6, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Présentation du package torchFastText et ses performances sur la codification de l'APE\n\n            \n\n            \n            \n              \n                Meilame Tayebjee\n                Mar 5, 2025\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n\n\n\nNo matching items"
  },
  {
    "objectID": "index.html#présentations-relatives-à-la-codification-automatique-de-lape",
    "href": "index.html#présentations-relatives-à-la-codification-automatique-de-lape",
    "title": "Présentations codification automatique de l'APE",
    "section": "",
    "text": "Tous les supports sont accessibles et modifiables sur Github InseeFrLab \n\n\n\n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Séminaire interne du département des méthodes statistiques de l'Insee\n\n            \n\n            \n            \n              \n                Thomas Faria et Tom Seimandi\n                Sep 1, 2023\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Présentation lors de l'évènement de lancement du SSP Hub\n\n            \n\n            \n            \n              \n                Thomas Faria et Tom Seimandi\n                Apr 17, 2023\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Presentation given during the UNECE Machine Learning for Official Statistics Workshop 2023\n\n            \n\n            \n            \n              \n                Thomas Faria and Tom Seimandi\n                Jun 5, 2023\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Présentation pour la formation Big Data donné à la BCEAO à Dakar\n\n            \n\n            \n            \n              \n                Romain Avouac, Thomas Faria et Tom Seimandi\n                Sep 27, 2023\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Slides used for an exchange with StatCan on MLOps\n\n            \n\n            \n            \n              \n                Romain Avouac, Thomas Faria et Tom Seimandi\n                Mar 19, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Presentation given during the NACE implementation webinar\n\n            \n\n            \n            \n              \n                Nathan Randriamanana\n                Apr 30, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Codification automatique de l'APE à l'Insee\n\n            \n\n            \n            \n              \n                Thomas Faria et Nathan Randriamanana\n                May 7, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Retraining strategies for an economic activity classification model\n\n            \n\n            \n            \n              \n                Thomas Faria, Nathan Randriamanana, Tom Seimandi\n                May 24, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n                \n                  \n                    \n                      \n                        Paper\n                      \n                    \n                  \n                \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025\n\n            \n\n            \n            \n              \n                Thomas Faria, Nathan Randriamanana\n                Nov 6, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Présentation du package torchFastText et ses performances sur la codification de l'APE\n\n            \n\n            \n            \n              \n                Meilame Tayebjee\n                Mar 5, 2025\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n\n\n\nNo matching items"
  },
  {
    "objectID": "slides/statcan-exchange/index.html#context",
    "href": "slides/statcan-exchange/index.html#context",
    "title": "MLOps at Insee: a use case for text classification",
    "section": "Context",
    "text": "Context\n\nSirene is the French national company registry\nWhen a company registers, an activity code is attributed\nEarly 2023:\n\nRefactoring of the Sirene information system\nCompanies register through a new channel\nPerformance drop of the legacy coding engine\nTeams already overwhelmed\n\nConsequence: Ideal moment to innovate (but under the constraint!)"
  },
  {
    "objectID": "slides/statcan-exchange/index.html#model",
    "href": "slides/statcan-exchange/index.html#model",
    "title": "MLOps at Insee: a use case for text classification",
    "section": "Model",
    "text": "Model\n\nText classification model which uses additional categorical variables\nFor now we use the fastText library\nOriginally trained on legacy data annotated partly by the coding engine and partly manually"
  },
  {
    "objectID": "slides/statcan-exchange/index.html#current-state-of-affairs",
    "href": "slides/statcan-exchange/index.html#current-state-of-affairs",
    "title": "MLOps at Insee: a use case for text classification",
    "section": "Current state of affairs",
    "text": "Current state of affairs\n\nModel trained on Insee’s cloud data science platform 😍\nCoding engine developed in Java inside of a monolithic architecture 😫\n\nCode duplication\nReproductibility issues\nIncreased risk of error\nMaintenance problems\nNo monitoring\nNo test data"
  },
  {
    "objectID": "slides/statcan-exchange/index.html#current-state-of-affairs-1",
    "href": "slides/statcan-exchange/index.html#current-state-of-affairs-1",
    "title": "MLOps at Insee: a use case for text classification",
    "section": "Current state of affairs",
    "text": "Current state of affairs"
  },
  {
    "objectID": "slides/statcan-exchange/index.html#mlops-target",
    "href": "slides/statcan-exchange/index.html#mlops-target",
    "title": "MLOps at Insee: a use case for text classification",
    "section": "MLOps target",
    "text": "MLOps target\n\nMicroservice architecture running on a Kubernetes cluster\n\nExperiment tracking and model store: MLflow\nModel served via an API: FastAPI\nAutomation with ArgoCD\nMonitoring dashboard: Quarto and DuckDB\nQuality control: annotations with Label Studio"
  },
  {
    "objectID": "slides/statcan-exchange/index.html#experiment-tracking",
    "href": "slides/statcan-exchange/index.html#experiment-tracking",
    "title": "MLOps at Insee: a use case for text classification",
    "section": "Experiment tracking",
    "text": "Experiment tracking\n\nArgo Workflows used for distributed training\nMLflow used to track/log experiments and compare runs\nCustom model class allows to package pre-processing steps in the predict method:\n\n# Define a custom model\nclass MyModel(mlflow.pyfunc.PythonModel):\n\n    def load_context(self, context):\n        self.model = load_model(context.artifacts[\"my_model\"])\n\n    def predict(self, context, model_input):\n        # &lt;INCLUDE PRE-PROCESSING STEPS HERE&gt;\n        return self.model.predict(model_input)"
  },
  {
    "objectID": "slides/statcan-exchange/index.html#model-store",
    "href": "slides/statcan-exchange/index.html#model-store",
    "title": "MLOps at Insee: a use case for text classification",
    "section": "Model store",
    "text": "Model store\n\nMLflow also used as a model store\nModels are packaged with all the metadata necessary to run inference\nRegistered models are simply loaded with this command where version is a number or a \"Production\" tag for example\n\nmodel = mlflow.pyfunc.load_model(\n    model_uri=f\"models:/{model_name}/{version}\"\n)"
  },
  {
    "objectID": "slides/statcan-exchange/index.html#api-serving",
    "href": "slides/statcan-exchange/index.html#api-serving",
    "title": "MLOps at Insee: a use case for text classification",
    "section": "API serving",
    "text": "API serving\n\nText classification model served through a containerized REST API:\n\nSimplicity for end users\nStandard query format\nScalable\nModular and portable\n\nMultiple endpoints: batch, online\nContinuous deployment with Argo CD"
  },
  {
    "objectID": "slides/statcan-exchange/index.html#api-serving-1",
    "href": "slides/statcan-exchange/index.html#api-serving-1",
    "title": "MLOps at Insee: a use case for text classification",
    "section": "API serving",
    "text": "API serving"
  },
  {
    "objectID": "slides/statcan-exchange/index.html#monitoring",
    "href": "slides/statcan-exchange/index.html#monitoring",
    "title": "MLOps at Insee: a use case for text classification",
    "section": "Monitoring",
    "text": "Monitoring\n\nMonitoring the model in a production environment is necessary:\n\nTo detect distribution drifts in input data\nTo check that the model has a stable behavior\nTo decide when to retrain a model\n\nIdeally, we would like to track model accuracy in real-time but expensive\nIn addition, monitoring of the API: latency, memory managment, disk usage, etc."
  },
  {
    "objectID": "slides/statcan-exchange/index.html#monitoring-1",
    "href": "slides/statcan-exchange/index.html#monitoring-1",
    "title": "MLOps at Insee: a use case for text classification",
    "section": "Monitoring",
    "text": "Monitoring\n\nHow we do it:\n\nAPI logs its activity\nLogs are fetched and formatted periodically\nMetrics are computed from the formatted logs\nDisplay on a dashboard"
  },
  {
    "objectID": "slides/statcan-exchange/index.html#monitoring-2",
    "href": "slides/statcan-exchange/index.html#monitoring-2",
    "title": "MLOps at Insee: a use case for text classification",
    "section": "Monitoring",
    "text": "Monitoring"
  },
  {
    "objectID": "slides/statcan-exchange/index.html#quality-control",
    "href": "slides/statcan-exchange/index.html#quality-control",
    "title": "MLOps at Insee: a use case for text classification",
    "section": "Quality control",
    "text": "Quality control\n\nTest data is gathered and annotated periodically\nAnnotation is done with Label Studio\nPerformance metrics are computed on the test data\nPerformance is diplayed on the monitoring dashboard\nSpecific retraining is necessary when specific metrics decrease under a certain threshold (not done yet)"
  },
  {
    "objectID": "slides/statcan-exchange/index.html#quality-control-1",
    "href": "slides/statcan-exchange/index.html#quality-control-1",
    "title": "MLOps at Insee: a use case for text classification",
    "section": "Quality control",
    "text": "Quality control"
  },
  {
    "objectID": "slides/journee-ssphub/index.html#contexte-1",
    "href": "slides/journee-ssphub/index.html#contexte-1",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Contexte",
    "text": "Contexte\n\nPlusieurs changements majeurs :\n\nInterne : Refonte du répertoire Sirene 4.\nExterne : Mise en place d’un guichet unique.\n\nConstat : Sicore n’est plus l’outil adapté ➨ 30% de codification automatique.\nConséquence : moment idéal pour proposer une nouvelle méthodologie de codification automatique de l’APE."
  },
  {
    "objectID": "slides/journee-ssphub/index.html#données",
    "href": "slides/journee-ssphub/index.html#données",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Données",
    "text": "Données\n\n\\(\\approx\\) 10 millions de liasses d’entreprises issues de Sirene 3 couvrant la période 2014-2022.\nDonnées labellisées par Sicore ou par un gestionnaire.\nUne observation consiste en :\n\nun descriptif textuel de l’activité\nla nature de l’activité – NAT (23 modalités)\nle type de la liasse – TYP (15 modalités)\nle type d’évènement – EVT (24 modalités)\nla surface (\\(m^2\\))– SUR (4 modalités)"
  },
  {
    "objectID": "slides/journee-ssphub/index.html#la-nomenclature-hiérarchique-de-lape",
    "href": "slides/journee-ssphub/index.html#la-nomenclature-hiérarchique-de-lape",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "La nomenclature hiérarchique de l’APE",
    "text": "La nomenclature hiérarchique de l’APE\n\n\n\n\n\n\n\n\n\nNiveau\nCode\nLibellé\nTaille\n\n\n\n\nSection\nH\nTransports et entreposage\n21\n\n\nDivision\n52\nEntreposage et services auxiliaires des transports\n88\n\n\nGroupe\n522\nServices auxiliaires des transports\n272\n\n\nClasse\n5224\nManutention\n615\n\n\nSous-classe\n5224A\nManutention portuaire\n732"
  },
  {
    "objectID": "slides/journee-ssphub/index.html#vectorisation-des-libellés",
    "href": "slides/journee-ssphub/index.html#vectorisation-des-libellés",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Vectorisation des libellés",
    "text": "Vectorisation des libellés\n\nPlongements lexicaux : méthode de vectorisation.\nModèle “Bag of n-grams”. On apprend des plongements pour les mots, les n-grams de mots et n-grams de caractères."
  },
  {
    "objectID": "slides/journee-ssphub/index.html#classification",
    "href": "slides/journee-ssphub/index.html#classification",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Classification",
    "text": "Classification\n\n\n\n\n\n\nModèle simple qui fonctionne bien dans notre contexte.\nIndice de confiance calculé pour chaque prédiction."
  },
  {
    "objectID": "slides/journee-ssphub/index.html#organisation-actuelle",
    "href": "slides/journee-ssphub/index.html#organisation-actuelle",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Organisation actuelle",
    "text": "Organisation actuelle\n\n3 parties prenantes autour du projet :\n\nÉquipe métier\nDéveloppeur Sirene 4\nSSP Lab\n\nMise en production (trop?) rapide :\n\nProblèmatique : équipes Sirene surchargées\nT1 2022 : lancement des expérimentations\nNovembre 2022 : 1ère mise en production de manière progressive et restrictive"
  },
  {
    "objectID": "slides/journee-ssphub/index.html#chronologie-avant-la-mise-en-production-dun-modèle",
    "href": "slides/journee-ssphub/index.html#chronologie-avant-la-mise-en-production-dun-modèle",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Chronologie avant la mise en production d’un modèle",
    "text": "Chronologie avant la mise en production d’un modèle\n\nExpérimentations par le SSP Lab et optimisation d’un modèle avec MLflow Tracking\nValidation du modèle par l’équipe métier\nLe SSP Lab transmet le binaire aux développeurs Sirene 4\nLes développeurs traduisent de Python à Java le preprocessing à effectuer en amont et intègre le modèle dans le module de codification"
  },
  {
    "objectID": "slides/journee-ssphub/index.html#une-fois-le-modèle-en-production",
    "href": "slides/journee-ssphub/index.html#une-fois-le-modèle-en-production",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Une fois le modèle en production",
    "text": "Une fois le modèle en production\n\n2 appels au module de classification :\n\nClassification automatique du code APE\nAide à la reprise manuelle via une IHM\n\nObservabilité du modèle :\n\nLogs accessibles seulement sur les machines de production ➨ demande nécessaire\nPas de constitution de jeu d’évaluation en continu"
  },
  {
    "objectID": "slides/journee-ssphub/index.html#retour-dexpérience",
    "href": "slides/journee-ssphub/index.html#retour-dexpérience",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Retour d’expérience",
    "text": "Retour d’expérience\n\nAPI Java vs. expérimentation Python :\n\nDuplication de code\nRisque d’erreurs accru\n\nProblèmes liés à l’utilisation de FastText :\n\nmaintenance\nreproductibilité\nsécurité\n\nInfrastructure de production rigide."
  },
  {
    "objectID": "slides/journee-ssphub/index.html#retour-dexpérience-1",
    "href": "slides/journee-ssphub/index.html#retour-dexpérience-1",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Retour d’expérience",
    "text": "Retour d’expérience\n\nMéconnaissance des problèmes métier côté SSP Lab pour la maintenance.\nContrôle de version et transmission des modèles.\nConfiance et compréhension du classifieur nécessaires côté métier/gestionnaires Sirene.\nLogs difficilement accessibles et au format variable.\nPas d’accès aux bases Sirene (réentraînement)."
  },
  {
    "objectID": "slides/journee-ssphub/index.html#organisation-visée",
    "href": "slides/journee-ssphub/index.html#organisation-visée",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Organisation visée",
    "text": "Organisation visée\n\nObservabilité, maintenance du modèle côté Sirene (appui technique du SSP Lab)\nCluster Kubernetes de production\nS’affranchir de FastText\nUtilisation du plein potentiel de MLflow pour la gestion des modèles en production\nDéveloppement d’une API Python"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#les-modèles-de-ml-en-production",
    "href": "slides/grp-veille-codif-auto-9/index.html#les-modèles-de-ml-en-production",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Les modèles de ML en production",
    "text": "Les modèles de ML en production\n\nDe plus en plus de modèle ML sont voués à être mis en production à l’Insee\nMultiples cas d’usages : codification automatique, imputation, détection de valeurs extrêmes\n\n\n\n\nQuality Assurance Framework of the European Statistical System\n\n\nSource data, integrated data, intermediate results and statistical outputs must be regularly assessed and validated.\n\n\n\n\nCela s’applique évidemment aux modèles de ML dans le processus de production statistique ➡️ besoin de maintenance dans le temps"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#qualité-des-modèles-ml",
    "href": "slides/grp-veille-codif-auto-9/index.html#qualité-des-modèles-ml",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Qualité des modèles ML",
    "text": "Qualité des modèles ML\n\nUn modèle ML est entrainé pour résoudre un tâche à partir de données de référence\nDonnées réelles peuvent dévier de ces données de références dans le temps ➡️ perte de performance ?\nRé-entrainement du modèle devient nécessaire\nCas extrême courant dans le cas de la statistique publique ➡️ changement de nomenclature"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#historique-du-projet-ape",
    "href": "slides/grp-veille-codif-auto-9/index.html#historique-du-projet-ape",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Historique du projet APE",
    "text": "Historique du projet APE\n\nEté 2022 : entraînement d’un modèle fasttext sur les données Sirene 3\nNovembre 2022 : 1ère mise en production (partielle) d’un modèle ML.\nJanvier 2023 : Prise en compte des valideurs dans Sirene 4 : éligibilité de l’activité du déclarant (CMA,…)\nMai 2023 : 1er ré-entrainement pour corriger un problème de classification\nMars 2024 : Toutes les liasses passent par fasttext. Complète bascule de Sirene 3 à 4\nEt maintenant ?"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#enjeux-actuels",
    "href": "slides/grp-veille-codif-auto-9/index.html#enjeux-actuels",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Enjeux actuels",
    "text": "Enjeux actuels\n\nPlusieurs problématiques :\n\nModèle entrainé sur les données Sirene 3\nChangement de nomenclature NAF 2008 vers NAF 2025\nExplicabilité du modèle pour les gestionnaires\n\nGroupe de veille n°10 en janvier 📅"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#calendrier-pour-ladoption-de-la-nouvelle-naf",
    "href": "slides/grp-veille-codif-auto-9/index.html#calendrier-pour-ladoption-de-la-nouvelle-naf",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Calendrier pour l’adoption de la nouvelle NAF 🗓️",
    "text": "Calendrier pour l’adoption de la nouvelle NAF 🗓️\n\nVers une adoption transitoire\n2025 ➡️ double codification en NAF 2025\n\nSirus : recodification pour fin 2025\nSirene : Intégration de la NAF 2025 en flux et d’une infrastructure MLOps-compatible\n\n2026 ➡️ amélioration de la codification en NAF 2025\n2027 ➡️ codification en NAF 2025 avec maintien de la codification NAF 2008"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#naf-2025-quels-changements",
    "href": "slides/grp-veille-codif-auto-9/index.html#naf-2025-quels-changements",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "NAF 2025 : quels changements ?",
    "text": "NAF 2025 : quels changements ?\n\nAu niveau 5 : 746 sous classes contre 732 auparavant\nPrincipalement des éclatements au niveau de la classe (niveau 4) … mais pas que !\n551 classes univoques, correspondance 1-pour-1 ➡️ cas idéal ! 👌"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#naf-2025-les-cas-multivoques",
    "href": "slides/grp-veille-codif-auto-9/index.html#naf-2025-les-cas-multivoques",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "NAF 2025 : les cas multivoques",
    "text": "NAF 2025 : les cas multivoques\n\n181 classes multivoques, correspondance 1-pour-N ➡️ cas problématiques ! 🚩\nBesoin d’un expert pour déterminer le nouveau code\n\n\n\n\nAfficher la distribution des codes multivoques\n\n\n\n\n1-to-N\n# occurence\n\n\n\n\n2\n109\n\n\n3\n30\n\n\n4\n24\n\n\n5\n6\n\n\n6\n4\n\n\n8\n1\n\n\n9\n2\n\n\n21\n1\n\n\n27\n1\n\n\n36\n1\n\n\n38\n2"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#enjeux-et-besoins-multiples",
    "href": "slides/grp-veille-codif-auto-9/index.html#enjeux-et-besoins-multiples",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Enjeux et besoins multiples",
    "text": "Enjeux et besoins multiples\n\nBesoin de recoder le stock de liasse de Sirene ➡️ + \\(14\\) millions…\nPouvoir coder le flux en NAF 2025 ➡️ entraîner un modèle ➡️ besoin d’avoir un stock…\nModèle en NAF 2008 entrainé sur + 10 millions\nPerformance de fastText très dépendant du nombre de données d’entraînement"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#données-à-disposition",
    "href": "slides/grp-veille-codif-auto-9/index.html#données-à-disposition",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Données à disposition",
    "text": "Données à disposition\n\nStock Sirene 3 : \\(~10\\) millions obs. mais peu adaptées aux nouvelles données\nStock Sirene 4 : \\(~2.7\\) millions obs.\n\nUnivoques : \\(1.3\\) millions obs. et 504 sous-classes\nMultivoques : \\(1.4\\) millions obs. et 177 sous-classes\n\nCampagne d’annotation manuelle indispensable"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#campagne-dannotation",
    "href": "slides/grp-veille-codif-auto-9/index.html#campagne-dannotation",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Campagne d’annotation",
    "text": "Campagne d’annotation\n\nLancement d’une campagne d’annotation depuis mi-2024\nPlateforme développée par l’équipe métier 🤔\nFocus sur les données multivoques uniques\n🎯 Objectif double :\n\nAttribuer un code NAF 2025 🚀\nVérifier la qualité du code NAF 2008 🗸\n\n\nAujourd’hui, \\(~27k\\) données annotées… insuffisant !"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#méthodologie",
    "href": "slides/grp-veille-codif-auto-9/index.html#méthodologie",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Méthodologie",
    "text": "Méthodologie\n\n🎯 Objectif : Reconstruire un jeu d’entraînement le plus exhaustif possible\nExpérimentation one-shot ➡️ pas de contrainte de reproductibilité … en production\nUtilisation de LLMs pour générer des annotations en NAF 2025\nDonnées à disposition :\n\nStock Sirene 4 (\\(~2.7\\) millions d’observations)\nTable de passage réalisée par les experts APE\nNotes explicatives de la NAF 2025\nAnnotations manuelles (\\(~27k\\) observations)"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#méthodologie-1",
    "href": "slides/grp-veille-codif-auto-9/index.html#méthodologie-1",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Méthodologie",
    "text": "Méthodologie"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#tirer-profit-des-llms",
    "href": "slides/grp-veille-codif-auto-9/index.html#tirer-profit-des-llms",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Tirer profit des LLMs",
    "text": "Tirer profit des LLMs\n\nRetrieval Augmented Generation (RAG) vs fine-tunning\n2 possibilités :\n\nRAG avec les notes explicatives\n\n\nPas encore testé 📝\n\n\nPseudo-RAG :\n\n\nRetriever manuel utilisant la table de passage\n\n💡 Idée générale ➡️ Fournir les données essentielles au LLM pour convertir les codes NAF 2008 vers 2025\n\n\n\n\nAvertissement\n\n\nL’idée n’est pas de construire un classifier, seulement créer des annotations."
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#le-prompting",
    "href": "slides/grp-veille-codif-auto-9/index.html#le-prompting",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Le prompting",
    "text": "Le prompting\n\nPrompt système identique pour toutes les observations\n\n\nAfficher le prompt sytème\n\nTu es un expert de la Nomenclature statistique des Activités économiques dans la Communauté Européenne (NACE). Tu es chargé de réaliser le changement de nomenclature. Ta mission consiste à attribuer un code NACE 2025 à une entreprise, en t'appuyant sur le descriptif de son activité et à partir d'une liste de codes proposés (identifiée à partir de son code NACE 2008 existant). Voici les instructions à suivre :\n1. Analyse la description de l'activité principale de l'entreprise et le code NACE 2008 fourni par l'utilisateur.\n2. À partir de la liste des codes NACE 2025 disponible, identifie la catégorie la plus appropriée qui correspond à l'activité principale de l'entreprise.\n3. Retourne le code NACE 2025 au format JSON comme spécifié par l'utilisateur. Si la description de l'activité de l'entreprise n'est pas suffisamment précise pour identifier un code NACE 2025 adéquat, retourne `null` dans le JSON.\n4. Évalue la cohérence entre le code NACE 2008 fourni et la description de l'activité de l'entreprise. Si le code NACE 2008 ne semble pas correspondre à cette description, retourne `False` dans le champ `nace08_valid` du JSON. Note que si tu arrives à classer la description de l'activité de l'entreprise dans un code NACE 2025, le champ `nace08_valid` devrait `True`, sinon il y a incohérence.\n5. Réponds seulement avec le JSON complété aucune autres information ne doit être retourné.\n\nUn prompt spécifique pour chaque observations comprenant :\n\nle libellé de l’activité principale de l’entreprise\nl’ancien code NAF 2008 connu\nLa liste des codes possibles issues du mapping avec leurs notes explicatives\n\nUne instruction sur le format de réponse attendu"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#qualifier-la-réponse-générée",
    "href": "slides/grp-veille-codif-auto-9/index.html#qualifier-la-réponse-générée",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Qualifier la réponse générée",
    "text": "Qualifier la réponse générée\n\nTendance des LLMs a être très volubiles…\nConstruction d’une réponse type, claire et brèves dans un format spécifique\nFormat JSON est le plus abondamment utilisé dans l’écosystème\n\n\n\nAfficher un exemple de réponse attendue\n\n{\n    \"codable\": true,\n    \"nace_2008_valid\": true,\n    \"nace2025\": \"0147J\" \n}\n\n\nParsing de la réponse :\n\nVérification du format\nContrôle des hallucinations"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#llms-utilisés",
    "href": "slides/grp-veille-codif-auto-9/index.html#llms-utilisés",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "LLMs utilisés",
    "text": "LLMs utilisés\n\n\n\n\n\n\n\n\n\n\nModèle\nTaille\nVitesse d’inférence\nPerformance\nCaractéristique\n\n\n\n\nQwen 2.5\n32B\nLent\nBonnes performances\nTrès restrictif\n\n\nMinistral\n8B\nExtrêmement rapide\nTrès raisonnable\nPas restrictif\n\n\nMistal Small\n44B\nLent\nBonnes performances\nAssez restrictif\n\n\nLlama 3.1\n70B (quantisé)\nExtrêmement lent\nTrès bonnes performances\nAssez restrictif"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#le-fléau-de-lévaluation",
    "href": "slides/grp-veille-codif-auto-9/index.html#le-fléau-de-lévaluation",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Le fléau de l’évaluation",
    "text": "Le fléau de l’évaluation\n\n❓ Question cruciale :\n\nComment évaluer un LLM ?\nClassification ➡️ plus facile, vraiment ?\nComplexité de la nomenclature\n\nUtilisation des \\(27k\\) annotations comme ground truth 🥇\n3 métriques de performances :\n\nPrécision totale\nPrécision parmi les “codables”\nPrécision “LLM” (erreurs imputables à la génération seulement)"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#performance-des-modèles",
    "href": "slides/grp-veille-codif-auto-9/index.html#performance-des-modèles",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Performance des modèles",
    "text": "Performance des modèles"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#reconstruction-du-jeu-multivoques",
    "href": "slides/grp-veille-codif-auto-9/index.html#reconstruction-du-jeu-multivoques",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Reconstruction du jeu multivoques",
    "text": "Reconstruction du jeu multivoques\n\n💡Principe : considérer les LLMs comme des annotateurs classiques ➡️ X-annotation\n❓Peut-on améliorer performances en mixant les résultats de chaque modèles ?\nConstruction de 3 annotations supplémentaires\n\nChoix en cascade (un modèle en priorité)\nChoix par vote à la majorité\nChoix par vote pondéré"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#combinaison-des-annotations",
    "href": "slides/grp-veille-codif-auto-9/index.html#combinaison-des-annotations",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Combinaison des annotations",
    "text": "Combinaison des annotations"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#ré-entrainement-en-naf-2025",
    "href": "slides/grp-veille-codif-auto-9/index.html#ré-entrainement-en-naf-2025",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Ré-entrainement en NAF 2025",
    "text": "Ré-entrainement en NAF 2025\n\nReconstruction du stock Sirene 4 en NAF 2025 (\\(~2\\) millions d’observations)\nDistribution des données quasi-inchangées\nUtilisation de nouvelles variables propres à Sirene 4\nPerformances similaires au modèle en NAF 2008"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#ré-entrainement-en-naf-2025-1",
    "href": "slides/grp-veille-codif-auto-9/index.html#ré-entrainement-en-naf-2025-1",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Ré-entrainement en NAF 2025",
    "text": "Ré-entrainement en NAF 2025"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#le-modèle-naf-2025",
    "href": "slides/grp-veille-codif-auto-9/index.html#le-modèle-naf-2025",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 à la NAF2025",
    "section": "Le modèle NAF 2025",
    "text": "Le modèle NAF 2025\n\nviewof activite = Inputs.text(\n  {label: '', value: 'coiffeur', width: 800}\n)\n\nviewof type_form = Inputs.text(\n  {label: 'Type de la liasse', value: 'X', width: 80}\n)\nurlApe = `https://codification-ape-dev.lab.sspcloud.fr/predict?description_activity=${activite}%20&type_form=${type_form}&event=01P&nb_echos_max=3&prob_min=0.0009`\n\nd3.json(urlApe).then( res =&gt; {\n  var IC, results;\n  ( {IC, ...results} = res )\n\n  IC = parseFloat(IC)\n\n  const rows = Object.values(results).map( obj =&gt; {\n    return `\n    &lt;tr&gt;\n      &lt;td&gt;${obj.code} | ${obj.libelle}&lt;/td&gt;\n      &lt;td&gt;${obj.probabilite.toFixed(3)}&lt;/td&gt;\n    &lt;/tr&gt;\n  `\n  }).join('')\n  \n  return html`\n  &lt;table&gt;\n    &lt;caption&gt;\n      Indice de confiance : ${IC.toFixed(3)}\n    &lt;/caption&gt;\n    &lt;tr&gt;\n      &lt;th style=\"text-align:center;\"&gt;Libellé (NAF 2025)&lt;/th&gt;\n      &lt;th&gt;Probabilité&lt;/th&gt;\n    &lt;/tr&gt;\n      ${rows}\n  &lt;/table&gt;`\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { debounce } from \"@mbostock/debouncing-input\""
  },
  {
    "objectID": "slides/eurostat-nace-rev-2024/index.html#context",
    "href": "slides/eurostat-nace-rev-2024/index.html#context",
    "title": "Classification of Business Activities by Machine Learning: The Case of France.",
    "section": "Context",
    "text": "Context\n\nSirene is the French national company registry\nWhen a company registers, an activity code is attributed\nChallenges :\n\nRefactoring of the Sirene information system\nNACE revision to come in 2025\nTeams still overwhelmed\n\nEnd of March 2024:\n\nOfficially switch from Sirene 3 to Sirene 4\n\nConsequences: Ideal moment to innovate (but under the constraint!)"
  },
  {
    "objectID": "slides/eurostat-nace-rev-2024/index.html#the-flow-of-formalities",
    "href": "slides/eurostat-nace-rev-2024/index.html#the-flow-of-formalities",
    "title": "Classification of Business Activities by Machine Learning: The Case of France.",
    "section": "The flow” of formalities",
    "text": "The flow” of formalities"
  },
  {
    "objectID": "slides/eurostat-nace-rev-2024/index.html#the-administrative-landscape",
    "href": "slides/eurostat-nace-rev-2024/index.html#the-administrative-landscape",
    "title": "Classification of Business Activities by Machine Learning: The Case of France.",
    "section": "The administrative landscape",
    "text": "The administrative landscape\n\nSiren number: company directory identification system\nPrincipal activity code (APE)\nClassification on a daily basis\nDifferent administrations\nDifferent information systems\nRequirements: quick, responsive and flexible to updated instructions"
  },
  {
    "objectID": "slides/eurostat-nace-rev-2024/index.html#assign-an-activy-code-different-processes",
    "href": "slides/eurostat-nace-rev-2024/index.html#assign-an-activy-code-different-processes",
    "title": "Classification of Business Activities by Machine Learning: The Case of France.",
    "section": "Assign an activy code: different processes",
    "text": "Assign an activy code: different processes"
  },
  {
    "objectID": "slides/eurostat-nace-rev-2024/index.html#assign-an-activy-code-two-outcomes",
    "href": "slides/eurostat-nace-rev-2024/index.html#assign-an-activy-code-two-outcomes",
    "title": "Classification of Business Activities by Machine Learning: The Case of France.",
    "section": "Assign an activy code: two outcomes",
    "text": "Assign an activy code: two outcomes\n\nAutomatic coding\nHuman review"
  },
  {
    "objectID": "slides/eurostat-nace-rev-2024/index.html#near-ubiquity-of-ml",
    "href": "slides/eurostat-nace-rev-2024/index.html#near-ubiquity-of-ml",
    "title": "Classification of Business Activities by Machine Learning: The Case of France.",
    "section": "Near-ubiquity of ML",
    "text": "Near-ubiquity of ML"
  },
  {
    "objectID": "slides/eurostat-nace-rev-2024/index.html#automatic-activity-classification",
    "href": "slides/eurostat-nace-rev-2024/index.html#automatic-activity-classification",
    "title": "Classification of Business Activities by Machine Learning: The Case of France.",
    "section": "Automatic activity classification",
    "text": "Automatic activity classification"
  },
  {
    "objectID": "slides/eurostat-nace-rev-2024/index.html#human-review",
    "href": "slides/eurostat-nace-rev-2024/index.html#human-review",
    "title": "Classification of Business Activities by Machine Learning: The Case of France.",
    "section": "Human review",
    "text": "Human review"
  },
  {
    "objectID": "slides/eurostat-nace-rev-2024/index.html#model",
    "href": "slides/eurostat-nace-rev-2024/index.html#model",
    "title": "Classification of Business Activities by Machine Learning: The Case of France.",
    "section": "Model",
    "text": "Model\n\nText classification model which uses additional categorical variables\nFor now we use the fastText library\nOriginally trained on legacy data annotated partly by the coding engine and partly manually"
  },
  {
    "objectID": "slides/eurostat-nace-rev-2024/index.html#fasttext",
    "href": "slides/eurostat-nace-rev-2024/index.html#fasttext",
    "title": "Classification of Business Activities by Machine Learning: The Case of France.",
    "section": "FastText",
    "text": "FastText\n\na rapid and lightweight model"
  },
  {
    "objectID": "slides/eurostat-nace-rev-2024/index.html#calendar-on-new-nace-adoption",
    "href": "slides/eurostat-nace-rev-2024/index.html#calendar-on-new-nace-adoption",
    "title": "Classification of Business Activities by Machine Learning: The Case of France.",
    "section": "Calendar on new NACE adoption",
    "text": "Calendar on new NACE adoption\n\n2025: statistical business register adopts new NACE\n\nDual Coding\n\nmajor coding with NACE rev 2\nminor coding with NACE rev 2.1\n\n\n2026: administrative business register adopts new NACE\n\nDual Coding\n\nmajor coding with NACE rev 2.1\nminor coding with NACE rev 2"
  },
  {
    "objectID": "slides/eurostat-nace-rev-2024/index.html#to-1-correspondence",
    "href": "slides/eurostat-nace-rev-2024/index.html#to-1-correspondence",
    "title": "Classification of Business Activities by Machine Learning: The Case of France.",
    "section": "1-to-1 correspondence",
    "text": "1-to-1 correspondence\n\nAn easy and ideal case"
  },
  {
    "objectID": "slides/eurostat-nace-rev-2024/index.html#to-many-correspondence",
    "href": "slides/eurostat-nace-rev-2024/index.html#to-many-correspondence",
    "title": "Classification of Business Activities by Machine Learning: The Case of France.",
    "section": "1-to-many correspondence",
    "text": "1-to-many correspondence\n\nAn ultimately less desirable solution\nNeed expert decision based on activity description"
  },
  {
    "objectID": "slides/eurostat-nace-rev-2024/index.html#annotation-campaign-strategy",
    "href": "slides/eurostat-nace-rev-2024/index.html#annotation-campaign-strategy",
    "title": "Classification of Business Activities by Machine Learning: The Case of France.",
    "section": "Annotation campaign strategy",
    "text": "Annotation campaign strategy\n\nA one-shot operation spanning multiple months in 2024\nmanual labeling only on the 1-to-many codes\nselect data to annotate since the implementation of the one-stop shop\nkill two birds with one stone\n\ncheck NACE rev 2 coding quality on the 1-to-many codes\nattribute a NACE rev 2.1 code"
  },
  {
    "objectID": "slides/eurostat-nace-rev-2024/index.html#labeling-method",
    "href": "slides/eurostat-nace-rev-2024/index.html#labeling-method",
    "title": "Classification of Business Activities by Machine Learning: The Case of France.",
    "section": "Labeling method",
    "text": "Labeling method"
  },
  {
    "objectID": "slides/eurostat-nace-rev-2024/index.html#reduce-tasks-to-annotate",
    "href": "slides/eurostat-nace-rev-2024/index.html#reduce-tasks-to-annotate",
    "title": "Classification of Business Activities by Machine Learning: The Case of France.",
    "section": "Reduce tasks to annotate",
    "text": "Reduce tasks to annotate\n\ntheoretical 1-to-many scenarios can eventually become 1-to-1 in practice\nduplicated textual descriptions may occur due to shared practices among registrants.\nHow to reduce the annotation workload for our annotators ?\n\nadapt correspondence table by considering real-world business rules\navoid giving the same textual descriptions to annotate"
  },
  {
    "objectID": "slides/bceao-2023/index.html#context",
    "href": "slides/bceao-2023/index.html#context",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "Context",
    "text": "Context\n\nPlusieurs changements majeurs:\n\nInterne: Refonte du répertoire Sirene 4.\nExterne: Mise en place d’un guichet unique pour déclarer les créations d’entreprises.\n\nConstat: Sicore n’est plus l’outil adapté ➨ seulement 30% de codification automatique.\nConséquence: moment idéal pour proposer une nouvelle méthodologie de codification automatique de l’APE."
  },
  {
    "objectID": "slides/bceao-2023/index.html#données",
    "href": "slides/bceao-2023/index.html#données",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "Données",
    "text": "Données\n\n\\(\\approx\\) 10 million de liasses d’entreprises issues de Sirene 3 couvrant la période 2014-2022.\nDonnées labellisées par Sicore ou par un gestionnaire.\nUne observation consiste en :\n\nUn descriptif textuel de l’activité\nLa nature de l’activité – NAT (23 modalités)\nLe type de la liasse – TYP (15 modalités)\nLe type d’évènement – EVT (24 modalités)\nLa surface (\\(m^2\\)) – SUR (4 modalités)"
  },
  {
    "objectID": "slides/bceao-2023/index.html#la-nomenclature-hiérarchique-de-lape",
    "href": "slides/bceao-2023/index.html#la-nomenclature-hiérarchique-de-lape",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "La nomenclature hiérarchique de l’APE",
    "text": "La nomenclature hiérarchique de l’APE\n\n\n\n\n\n\n\n\n\nNiveau\nCode\nLibellé\nTaille\n\n\n\n\nSection\nH\nTransports et entreposage\n21\n\n\nDivision\n52\nEntreposage et services auxiliaires des transports\n88\n\n\nGroupe\n522\nServices auxiliaires des transports\n272\n\n\nClasse\n5224\nManutention\n615\n\n\nSous-classe\n5224A\nManutention portuaire\n732"
  },
  {
    "objectID": "slides/bceao-2023/index.html#feature-extraction",
    "href": "slides/bceao-2023/index.html#feature-extraction",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "Feature extraction",
    "text": "Feature extraction\n\nPlongements lexicaux: méthode de vectorisation.\nPlongements pré-entrainé disponibles en open-source.\nNous apprenons nos propres plongements de mots.\nMais aussi des plogements de :\n\nn-grams de mots et de n-grams de caractères."
  },
  {
    "objectID": "slides/bceao-2023/index.html#classifieur-linéaire",
    "href": "slides/bceao-2023/index.html#classifieur-linéaire",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "Classifieur linéaire",
    "text": "Classifieur linéaire\n\n2 méthodes pour la classification :\n\nSoftmax : un unique classifieur multiclasse.\nOne-vs-all : de multiples classifieurs binaires.\n\nOptimisation : algorithme de type descente de gradient stochastique.\nFonction de perte : entropie croisée."
  },
  {
    "objectID": "slides/bceao-2023/index.html#le-modèle-fasttext",
    "href": "slides/bceao-2023/index.html#le-modèle-fasttext",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "Le modèle fastText",
    "text": "Le modèle fastText\n\nfastText: Modèle de type “bag of n-grams” très simple et rapide (C++)."
  },
  {
    "objectID": "slides/bceao-2023/index.html#prise-en-compte-des-variables-catégorielles",
    "href": "slides/bceao-2023/index.html#prise-en-compte-des-variables-catégorielles",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "Prise en compte des variables catégorielles",
    "text": "Prise en compte des variables catégorielles\n\nConcaténation du libellé avec les noms et valeurs des variables annexes :\n\n\n\n\nText\nNAT\nTYP\nEVT\nSUR\n\n\n\n\nCours de musique\nNaN\nX\n01P\nNaN\n\n\n\n\n⬇️\n\n“Cours de musique NAT_NaN TYP_X EVT_01P SUR_NaN”\n\nMéthode imparfaite : 3-grams “AT_” ou “T_0” utilisés."
  },
  {
    "objectID": "slides/bceao-2023/index.html#prétraitements-effectués",
    "href": "slides/bceao-2023/index.html#prétraitements-effectués",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "Prétraitements effectués",
    "text": "Prétraitements effectués\n\nNettoyage indispensable pour l’analyse textuelle.\nContrainte : simple, léger et facilement reproductible en Java .\n\n\n\n\n\n\n\n\nTransformation\nText description\n\n\n\n\nInput\n3 D: La Deratisation - La Desinsectisation - La Desinfection\n\n\nLower-case conversion\n3 d: la deratisation - la desinsectisation - la desinfection\n\n\nPunctuations removal\n3 d la deratisation la desinsectisation la desinfection"
  },
  {
    "objectID": "slides/bceao-2023/index.html#preprocessing",
    "href": "slides/bceao-2023/index.html#preprocessing",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "Preprocessing",
    "text": "Preprocessing\n\n\n\n\n\n\n\nTransformation\nLibellé\n\n\n\n\nInput\n3 D: La Deratisation - La Desinsectisation - La Desinfection\n\n\n…\n…\n\n\nNumbers removal\nd la deratisation la desinsectisation la desinfection\n\n\nOne-letter word removal\nla deratisation la desinsectisation la desinfection\n\n\nStopwords removal\nderatisation desinsectisation desinfection"
  },
  {
    "objectID": "slides/bceao-2023/index.html#preprocessing-1",
    "href": "slides/bceao-2023/index.html#preprocessing-1",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "Preprocessing",
    "text": "Preprocessing\n\n\n\nTransformation\nLibellé\n\n\n\n\nInput\n3 D: La Deratisation - La Desinsectisation - La Desinfection\n\n\n…\n…\n\n\nNaN removal\nderatisation desinsectisation desinfection\n\n\nStemming\nderatis desinsectis desinfect"
  },
  {
    "objectID": "slides/bceao-2023/index.html#une-bonne-performance-globale",
    "href": "slides/bceao-2023/index.html#une-bonne-performance-globale",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "Une bonne performance globale",
    "text": "Une bonne performance globale\n\n\nFigure 1: Taux de précision pour chaque niveau de la nomenclature du code APE\n\nPrès de 80% des libellés issus du guichet unique sont correctement codifiés.\nErreurs de prédiction proches dans la nomenclature."
  },
  {
    "objectID": "slides/bceao-2023/index.html#fludifier-le-processus-de-codification-manuel",
    "href": "slides/bceao-2023/index.html#fludifier-le-processus-de-codification-manuel",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "Fludifier le processus de codification manuel",
    "text": "Fludifier le processus de codification manuel\n\n\nFigure 2: Top-\\(k\\) accuracy pour chaque jeu de données.\n\nConnaissance des probabilités pour chaque classe.\nDans 94% des cas, la bonne classification se trouve dans les 5 prédictions les plus probables."
  },
  {
    "objectID": "slides/bceao-2023/index.html#construction-dun-indice-de-confiance",
    "href": "slides/bceao-2023/index.html#construction-dun-indice-de-confiance",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "Construction d’un indice de confiance",
    "text": "Construction d’un indice de confiance\n\n\nFigure 3: Distribution de l’indice de confiance en fonction du résultat de la prédiction.\n\nObjectif : discriminer les mauvaises des bonnes prédictions.\nIndice de confiance retenu : différence entre les deux probabilités les plus élevées."
  },
  {
    "objectID": "slides/bceao-2023/index.html#améliorer-lefficacité-de-la-reprise-manuelle",
    "href": "slides/bceao-2023/index.html#améliorer-lefficacité-de-la-reprise-manuelle",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "Améliorer l’efficacité de la reprise manuelle",
    "text": "Améliorer l’efficacité de la reprise manuelle\n\n\nFigure 4: Précision en fonction du taux de reprise manuelle effectuée.\n\nOptimisation de la reprise manuelle ➨ gain de performance."
  },
  {
    "objectID": "slides/bceao-2023/index.html#la-notion-de-mise-en-production",
    "href": "slides/bceao-2023/index.html#la-notion-de-mise-en-production",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "La notion de mise en production",
    "text": "La notion de mise en production\n\nMettre en production : faire vivre une application dans l’espace de ses utilisateurs\n\nNotion simple mais mise en oeuvre compliquée !\n\nDépasser le stade de l’expérimentation\n\nBonnes pratiques de développement\nTechniques informatiques d’industrialisation\n\nEnjeu : pouvoir jouer le rôle d’interface entre métier et équipes techniques"
  },
  {
    "objectID": "slides/bceao-2023/index.html#retour-dexpérience-à-linsee",
    "href": "slides/bceao-2023/index.html#retour-dexpérience-à-linsee",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "Retour d’expérience à l’Insee",
    "text": "Retour d’expérience à l’Insee\n\nContrainte temporelle forte :\n\n\nMise en place du Guichet Unique + refonte Sirene 4\nÉquipe en charge de la codification surchargée\n\n\nInfrastructure de production rigide :\n\n\nUn seul langage disponible, Java\nPas de modèle de ML en production\n\n\nConfiance des équipes à acquérir :\n\n\nAppréhension concernant la performance du modèle une fois en production\nObjectif : Déployer un modèle à la fois rapidement et progressivement"
  },
  {
    "objectID": "slides/bceao-2023/index.html#organisation-actuelle-avant-la-mise-en-production",
    "href": "slides/bceao-2023/index.html#organisation-actuelle-avant-la-mise-en-production",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "Organisation actuelle avant la mise en production",
    "text": "Organisation actuelle avant la mise en production\n\n\n3 parties prenantes"
  },
  {
    "objectID": "slides/bceao-2023/index.html#organisation-actuelle-une-fois-le-modèle-déployé-en-production",
    "href": "slides/bceao-2023/index.html#organisation-actuelle-une-fois-le-modèle-déployé-en-production",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "Organisation actuelle une fois le modèle déployé en production",
    "text": "Organisation actuelle une fois le modèle déployé en production"
  },
  {
    "objectID": "slides/bceao-2023/index.html#inefficacité-organisationelle",
    "href": "slides/bceao-2023/index.html#inefficacité-organisationelle",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "Inefficacité organisationelle",
    "text": "Inefficacité organisationelle\n\nProblèmes rencontrés :\n\nMéconnaissance des problèmes métier côté Lab pour la maintenance\nContrôle de version et transmission des modèles\nOrganisation inefficace entre les parties prenantes\n\nDéfis à anticiper :\n\nSurveillance du modèle en temps réel\nRé-entrainement régulier\n\nConséquence : Besoin d’adopter les bonnes pratiques d’un point de vue technique (MLOps) et organisationel"
  },
  {
    "objectID": "slides/bceao-2023/index.html#organisation-visée-à-linsee",
    "href": "slides/bceao-2023/index.html#organisation-visée-à-linsee",
    "title": "Codification automatique de l’APE avec de l’apprentissage statistique",
    "section": "Organisation visée à l’Insee",
    "text": "Organisation visée à l’Insee"
  },
  {
    "objectID": "slides/estoril-slides/index.html#machine-learning-in-official-statistics",
    "href": "slides/estoril-slides/index.html#machine-learning-in-official-statistics",
    "title": "Retraining strategies for an economic activity classification model",
    "section": "Machine learning in official statistics",
    "text": "Machine learning in official statistics\n\nToday, machine learning systems contribute effectively to the production of official statistics\nCoding engines, data editing: outlier detection, imputation\nCoP: “Source data, integrated data, intermediate results and statistical outputs [must be] regularly assessed and validated” and “revisions [must be] regularly analysed in order to improve source data, statistical processes and outputs”\nThis naturally applies when ML systems are leveraged in the process of producing statistics"
  },
  {
    "objectID": "slides/estoril-slides/index.html#quality-of-ml-systems",
    "href": "slides/estoril-slides/index.html#quality-of-ml-systems",
    "title": "Retraining strategies for an economic activity classification model",
    "section": "Quality of ML systems",
    "text": "Quality of ML systems\n\nA ML model is trained to solve a task based on reference data\nReal-life data can deviate from the reference data, which leads to performance issues\nRetraining is necessary to avoid these issues"
  },
  {
    "objectID": "slides/estoril-slides/index.html#description-of-the-coding-system",
    "href": "slides/estoril-slides/index.html#description-of-the-coding-system",
    "title": "Retraining strategies for an economic activity classification model",
    "section": "Description of the coding system",
    "text": "Description of the coding system\n\nSirene is the French national company register\nWhen a company registers, an activity code is attributed\nA model trained on historical Sirene data is used when it is confident enough. Otherwise, the description is given a code manually"
  },
  {
    "objectID": "slides/estoril-slides/index.html#modeling",
    "href": "slides/estoril-slides/index.html#modeling",
    "title": "Retraining strategies for an economic activity classification model",
    "section": "Modeling",
    "text": "Modeling"
  },
  {
    "objectID": "slides/estoril-slides/index.html#performance",
    "href": "slides/estoril-slides/index.html#performance",
    "title": "Retraining strategies for an economic activity classification model",
    "section": "Performance",
    "text": "Performance\n\nEvaluation on historical data: very high accuracy of 89%\nWith newer hand-coded data: reduced accuracy of 80% due to a distribution shift in the data\nCompany activities evolve over time. New businesses appear, businesses traditionally associated with a certain activity may see this activity evolve, etc."
  },
  {
    "objectID": "slides/estoril-slides/index.html#design",
    "href": "slides/estoril-slides/index.html#design",
    "title": "Retraining strategies for an economic activity classification model",
    "section": "Design",
    "text": "Design\n\nThe model is served via a REST API (developed with FastAPI)\nA process fetches logs daily, parses them and saves their content on a persistent storage\nAn interactive dashboard is built with Quarto to offer insight on data and how it is coded"
  },
  {
    "objectID": "slides/estoril-slides/index.html#dashboard",
    "href": "slides/estoril-slides/index.html#dashboard",
    "title": "Retraining strategies for an economic activity classification model",
    "section": "Dashboard",
    "text": "Dashboard\n\nDashboard tab offering daily and weekly insight on the number of queries to the API and its automatic coding rate."
  },
  {
    "objectID": "slides/estoril-slides/index.html#dashboard-1",
    "href": "slides/estoril-slides/index.html#dashboard-1",
    "title": "Retraining strategies for an economic activity classification model",
    "section": "Dashboard",
    "text": "Dashboard\n\nDashboard tab displaying the two distributions of predicted classes at a specified level of the classification system for two specified time windows."
  },
  {
    "objectID": "slides/estoril-slides/index.html#continuous-performance-evaluation",
    "href": "slides/estoril-slides/index.html#continuous-performance-evaluation",
    "title": "Retraining strategies for an economic activity classification model",
    "section": "Continuous performance evaluation",
    "text": "Continuous performance evaluation\n\nWe continuously increment an evaluation set to monitor the performance of the ML system\nBatches are sampled from recent Sirene data and uploaded onto Label Studio\nFor now data is shared between annotators and each description is coded once (could change in the future)\nThe dashboard is enriched with additional tabs leveraging evaluation data"
  },
  {
    "objectID": "slides/estoril-slides/index.html#continuous-performance-evaluation-1",
    "href": "slides/estoril-slides/index.html#continuous-performance-evaluation-1",
    "title": "Retraining strategies for an economic activity classification model",
    "section": "Continuous performance evaluation",
    "text": "Continuous performance evaluation\n\nDashboard tab giving insight on the monthly accuracy of the evaluation set."
  },
  {
    "objectID": "slides/estoril-slides/index.html#periodic-retraining",
    "href": "slides/estoril-slides/index.html#periodic-retraining",
    "title": "Retraining strategies for an economic activity classification model",
    "section": "Periodic retraining",
    "text": "Periodic retraining\n\nCompany activities evolve over time. A first strategy is to retrain the model periodically\nHow frequently ? There is a tradeoff as there should be a validation procedure to use a new model in production\n\nIn our case, distribution shifts are not large. It is reasonable to retrain twice a year"
  },
  {
    "objectID": "slides/estoril-slides/index.html#additional-retraining",
    "href": "slides/estoril-slides/index.html#additional-retraining",
    "title": "Retraining strategies for an economic activity classification model",
    "section": "Additional retraining",
    "text": "Additional retraining\n\nAdditional specific retraining procedures can be triggered:\n\nWhen the monitoring system detects unusual shifts in the data\nWhen repeated claims are made by certain companies on their activity code\nWhen coding concepts change"
  },
  {
    "objectID": "slides/estoril-slides/index.html#what-training-data",
    "href": "slides/estoril-slides/index.html#what-training-data",
    "title": "Retraining strategies for an economic activity classification model",
    "section": "What training data ?",
    "text": "What training data ?\n\nWhen retraining a model from scratch: how far should we go in the past to build the training set ?\nEmpirical evaluation is necessary:\n\nModel capabilities scale with training data\nOlder data has lower quality labels"
  },
  {
    "objectID": "slides/estoril-slides/index.html#what-training-data-1",
    "href": "slides/estoril-slides/index.html#what-training-data-1",
    "title": "Retraining strategies for an economic activity classification model",
    "section": "What training data ?",
    "text": "What training data ?\n\nAccuracy and training set size as functions of the earliest year included in historical training data"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-10/index.html#fasttext-en-production-mais-archivé",
    "href": "slides/grp-veille-codif-auto-10/index.html#fasttext-en-production-mais-archivé",
    "title": "L’après fastText: Présentation de torchFastText",
    "section": "fastText : en production, mais archivé",
    "text": "fastText : en production, mais archivé\n\nfastText : le go-to pour la classification de texte à l’Insee\nEfficace, performant, mis en production pour la codification APE…\n…mais repo archivé depuis le 19/03/2024"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-10/index.html#enjeux",
    "href": "slides/grp-veille-codif-auto-10/index.html#enjeux",
    "title": "L’après fastText: Présentation de torchFastText",
    "section": "Enjeux",
    "text": "Enjeux\n\nLa non-maintenance de la librairie : à terme, risques de maintenance, de compatibilité…\nSurtout : freine les possibilités de modernisation\nUne alternative : torchFastText\nAvec toujours un horizon de production"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-10/index.html#opportunités-et-contraintes",
    "href": "slides/grp-veille-codif-auto-10/index.html#opportunités-et-contraintes",
    "title": "L’après fastText: Présentation de torchFastText",
    "section": "Opportunités (et contraintes ?)",
    "text": "Opportunités (et contraintes ?)\n💪\n\nArchitecture in-house, adaptée aux besoins maison\nMaintenance internalisée\nMeilleur monitoring de l’entraînement 📈\nPassage en PyTorch ouvre des opportunités de modernisation : explicabilité, modèles plus performants…\n\n😖 Nécessite une GPU pour garder des temps d’entraînement similaires\nSurtout, des questions sur le temps d’inférence (forcément sur CPU)…"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-10/index.html#objectifs",
    "href": "slides/grp-veille-codif-auto-10/index.html#objectifs",
    "title": "L’après fastText: Présentation de torchFastText",
    "section": "Objectifs",
    "text": "Objectifs\n\nDistribution d’une architecture de deep learning standardisée pour les besoins de classification de texte avec variables catégorielles\nPublication en open-source pour favoriser la collaboration\nA destination d’autres équipes de l’Insee, SSM et INS européens 👐\nProgressivement pouvoir mettre en production du PyTorch"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-10/index.html#le-modèle-pytorch",
    "href": "slides/grp-veille-codif-auto-10/index.html#le-modèle-pytorch",
    "title": "L’après fastText: Présentation de torchFastText",
    "section": "Le modèle PyTorch",
    "text": "Le modèle PyTorch\n\nLe modèle en tant que tel en PyTorch natif\n\n\nfrom torchFastText.model import FastTextModel\n\nmodel = FastTextModel(embedding_dim=80,\n                      num_classes=732,\n                      num_rows = 20000,\n                      )\nprint(model)\n\nFastTextModel(\n  (embeddings): Embedding(20000, 80, padding_idx=0, sparse=True)\n  (fc): Linear(in_features=80, out_features=732, bias=True)\n)"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-10/index.html#gestion-des-variables-catégorielles",
    "href": "slides/grp-veille-codif-auto-10/index.html#gestion-des-variables-catégorielles",
    "title": "L’après fastText: Présentation de torchFastText",
    "section": "Gestion des variables catégorielles",
    "text": "Gestion des variables catégorielles\n\nVéritable ajout par rapport à la librairie originale : chaque variable catégorielle a une matrice d’embedding associée\nLe read-me précise la façon dont le modèle les gère\n\n\nfrom torchFastText.model import FastTextModel\n\nmodel = FastTextModel(embedding_dim=80,\n                      num_classes=732,\n                      num_rows = 20000,\n                      categorical_vocabulary_sizes=[10, 20],\n                      categorical_embedding_dims=5\n                      )\nprint(model)\n\nFastTextModel(\n  (embeddings): Embedding(20000, 80, padding_idx=0, sparse=True)\n  (emb_0): Embedding(10, 5)\n  (emb_1): Embedding(20, 5)\n  (fc): Linear(in_features=85, out_features=732, bias=True)\n)"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-10/index.html#le-module-lightning",
    "href": "slides/grp-veille-codif-auto-10/index.html#le-module-lightning",
    "title": "L’après fastText: Présentation de torchFastText",
    "section": "Le module Lightning",
    "text": "Le module Lightning\n\nLa librairie Lightning est une surcouche de PyTorch qui permet de gérer l’entraînement\nLe package fournit également le “module” Lightning qui peut être donné en entrée au Trainer"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-10/index.html#section",
    "href": "slides/grp-veille-codif-auto-10/index.html#section",
    "title": "L’après fastText: Présentation de torchFastText",
    "section": "",
    "text": "from torchFastText.model import FastTextModel, FastTextModule\nimport torch\n\nmodel = FastTextModel(embedding_dim=80,\n                      num_classes=732,\n                      num_rows = 20000,\n                      )\n\nmodule = FastTextModule(\n    model=model,\n    loss= torch.nn.CrossEntropyLoss(),\n    optimizer=torch.optim.Adam,\n    optimizer_params={\"lr\": 0.001},\n    scheduler = None,\n    scheduler_params=None\n)\nprint(module)\n\nFastTextModule(\n  (model): FastTextModel(\n    (embeddings): Embedding(20000, 80, padding_idx=0, sparse=True)\n    (fc): Linear(in_features=80, out_features=732, bias=True)\n  )\n  (loss): CrossEntropyLoss()\n  (accuracy_fn): MulticlassAccuracy()\n)"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-10/index.html#le-tokenizer",
    "href": "slides/grp-veille-codif-auto-10/index.html#le-tokenizer",
    "title": "L’après fastText: Présentation de torchFastText",
    "section": "Le tokenizer",
    "text": "Le tokenizer\n\nL’objet NGramTokenizer reprend la méthode des ngrams du papier original pour transformer une phrase en une liste de tokens\n\n\nfrom torchFastText.datasets import NGramTokenizer\n\ntraining_text = ['boulanger', 'coiffeur', 'boucherie', 'boucherie charcuterie']\n\ntokenizer = NGramTokenizer(\n    min_n=3, \n    max_n=6, \n    num_tokens= 100,\n    len_word_ngrams=2, \n    min_count=1, \n    training_text=training_text\n    )\n\nprint(tokenizer.tokenize([\"boulangerie\"])[0])\n\n[['&lt;bo', 'bou', 'oul', 'ula', 'lan', 'boul', 'nge', '&lt;boul', 'eri', 'rie', 'ie&gt;', 'boul', 'boul', 'oula', 'ulan', 'lang', 'ange', 'nger', 'geri', 'erie', 'rie&gt;', '&lt;boul', 'boula', 'oulan', 'ulang', 'lange', 'anger', 'ngeri', 'gerie', 'erie&gt;', '&lt;boula', 'boulan', 'oulang', 'ngerie', 'langer', 'angeri', 'ngerie', 'gerie&gt;', '&lt;/s&gt;', 'boulangerie &lt;/s&gt;']]"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-10/index.html#la-classe-wrapper",
    "href": "slides/grp-veille-codif-auto-10/index.html#la-classe-wrapper",
    "title": "L’après fastText: Présentation de torchFastText",
    "section": "La classe wrapper",
    "text": "La classe wrapper\n\nA destination d’utilisateurs débutants en deep learning\nOrchestre l’ensemble des briques pour lancer un entraînement rapidement\n\n\nfrom torchFastText import torchFastText\n\n# Initialize the model\nmodel = torchFastText(\n    num_tokens=1000000,\n    embedding_dim=100,\n    min_count=5,\n    min_n=3,\n    max_n=6,\n    len_word_ngrams=True,\n    sparse=True\n)\n\n# Train the model\nmodel.train(\n    X_train=train_data,\n    y_train=train_labels,\n    X_val=val_data,\n    y_val=val_labels,\n    num_epochs=10,\n    batch_size=64\n)\n# Make predictions\npredictions = model.predict(test_data)"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-10/index.html#stratégie",
    "href": "slides/grp-veille-codif-auto-10/index.html#stratégie",
    "title": "L’après fastText: Présentation de torchFastText",
    "section": "Stratégie",
    "text": "Stratégie\n📈 Données :\n\nExtraction Sirene 4 : de janvier 2023 à février 2025\nSplit en train (2.5M de libellés) / val (300k) / test (300k)\nDataset de test externe annoté par des humains (8k)\n\n⛓️ Méthode :\n\nEntraînement parallélisé (Argo Workflow), tracking avec MLFlow\nSur GPU (A2 et H100)\n10 epochs, batch size de 256"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-10/index.html#objectifs-1",
    "href": "slides/grp-veille-codif-auto-10/index.html#objectifs-1",
    "title": "L’après fastText: Présentation de torchFastText",
    "section": "🚀 Objectifs :",
    "text": "🚀 Objectifs :\n\nGrid search sur la dimension d’embedding et le nombre de buckets avec entraînement GPU (~2 mn / epoch)\nSélection du modèle le plus petit possible sans rogner sur la performance\nTest sur CPU (précision, calibration, temps d’inférence)"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-10/index.html#entraînement---bilan",
    "href": "slides/grp-veille-codif-auto-10/index.html#entraînement---bilan",
    "title": "L’après fastText: Présentation de torchFastText",
    "section": "Entraînement - bilan",
    "text": "Entraînement - bilan"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-10/index.html#résultats-de-la-validation",
    "href": "slides/grp-veille-codif-auto-10/index.html#résultats-de-la-validation",
    "title": "L’après fastText: Présentation de torchFastText",
    "section": "Résultats de la validation",
    "text": "Résultats de la validation\n☑️ On choisit le modèle \\((10000, 80)\\)\n\n\n\n\n\n\n\n\n\nTest Accuracy ⬆️\nBrier Score ⬇️\n\n\nDataset\n\n\n\n\n\n\nLabel Studio\n0.782\n0.153\n\n\nS4\n0.820\n0.117"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-10/index.html#calibration",
    "href": "slides/grp-veille-codif-auto-10/index.html#calibration",
    "title": "L’après fastText: Présentation de torchFastText",
    "section": "Calibration",
    "text": "Calibration"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-10/index.html#temps-dinférence",
    "href": "slides/grp-veille-codif-auto-10/index.html#temps-dinférence",
    "title": "L’après fastText: Présentation de torchFastText",
    "section": "Temps d’inférence",
    "text": "Temps d’inférence"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-10/index.html#explicabilité",
    "href": "slides/grp-veille-codif-auto-10/index.html#explicabilité",
    "title": "L’après fastText: Présentation de torchFastText",
    "section": "Explicabilité",
    "text": "Explicabilité\n\nviewof top_k = Inputs.range([0, 10], {value: 3, step: 1, label: \"Top k\"})\nviewof activite = Inputs.text({label: \"\", value: \"coiffeur\", width:800})\n\nurlApe = transformToUrl(activite, top_k)\n\npredictions = d3.json(urlApe)\n\npredictions_arr = Object.values(predictions)\n\nInputs.table(\n  predictions_arr, {\n    format: {\n     probabilite: (d) =&gt; d.toFixed(3)},\n\n     columns: [\n    \"code\",\n    \"libelle\",\n    \"probabilite\",\n  ],\n  header: {\n    code: \"Code NAF\",\n    libelle: \"Libellé\",\n    probabilite:\"Score de confiance\"\n  }\n    }\n)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nletters = activite.split('').filter(letter =&gt; letter != ' ')\nwords = activite.split(\" \").filter(word =&gt; word !== \"\")\n\nlettersData = letters.map((letter, i) =&gt; ({\n        x: `${letter}_${i}`, \n        y: chosen_label.letter_attr[i], \n        code: chosen_label.code,\n        letter: letter,\n        idx: i,\n      }))\n\nwordsData = words.map((word, i) =&gt; ({\n        x: `${word}_${i}`, \n        y: chosen_label.word_attr[i], \n        code: chosen_label.code,\n        word:word,\n        idx:i,\n      }))\n\nlettersDomain = letters.map((letter, i) =&gt; `${letter}_${i}`)\nwordsDomain = words.map((word, i) =&gt; `${word}_${i}`)\n\nviewof chosen_label =\n  Inputs.select(predictions_arr, {label: \"\", format: x=&gt;x.code, value:predictions_arr[0].code})\n\nviewof aggregateWords = Inputs.toggle({\n  label: \"\"\n})\n\ndata_to_plot = (aggregateWords == true) ? wordsData : lettersData\ndomain_to_plot = (aggregateWords == true) ? wordsDomain : lettersDomain\n\n\nPlot.plot({\n  marks: [\n    Plot.barY(\n      data_to_plot,\n      { \n        x: \"x\", \n        y: \"y\", \n        fill: \"code\",\n      }\n    )\n  ],\n  x: { label: \"\", tickFormat: d =&gt; d.split('_')[0], domain:domain_to_plot },\n  y: { label: \"Score d'influence\", grid: true },\n  color: { scheme: \"Tableau10\", legend: true },\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { debounce } from \"@mbostock/debouncing-input\" \nimport {Plot} from \"@observablehq/plot\";\n\nfunction transformToUrl(description, top_k) {\n  // Base URL\n  const baseUrl = \"https://codification-ape-pytorch.lab.sspcloud.fr/predict-and-explain\";\n  \n  // Encode the description to make it URL-safe\n  const encodedDescription = encodeURIComponent(description);\n  \n  // Append parameters to the URL\n  const fullUrl = `${baseUrl}?text_description=${encodedDescription}&prob_min=0.01&top_k=${top_k}`;\n\n  return fullUrl;\n}\n\nfunction generateLetterLabels(length) {\n  return Array.from({ length }, (_, i) =&gt; String.fromCharCode(65 + (i % 26)));\n}"
  },
  {
    "objectID": "slides/inserm-echange/index.html#contexte-1",
    "href": "slides/inserm-echange/index.html#contexte-1",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Contexte",
    "text": "Contexte\n\nSirene est le répertoire des entreprises françaises\nUn code APE est attribué à chaque entreprise\nDébut 2023:\n\nRefonte du répertoire Sirene\nMise en place d’un guichet unique pour les formalités d’entreprises\nForte baisse de performance de l’outil de codification historique\nEquipes Sirene déjà surchargées avant la refonte\n\nConséquence : besoin d’un nouvel outil… en innovant"
  },
  {
    "objectID": "slides/inserm-echange/index.html#données",
    "href": "slides/inserm-echange/index.html#données",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Données",
    "text": "Données\n\nPrédiction du code APE à partir des descriptifs d’activités\n\\(\\approx\\) 10 millions d’obs. issues de Sirene 3 couvrant la période 2014-2022\nDonnées labellisées par Sicore ou par un gestionnaire\nStructure hiérarchique de la nomenclature"
  },
  {
    "objectID": "slides/inserm-echange/index.html#la-nomenclature-hiérarchique-de-lape",
    "href": "slides/inserm-echange/index.html#la-nomenclature-hiérarchique-de-lape",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "La nomenclature hiérarchique de l’APE",
    "text": "La nomenclature hiérarchique de l’APE\n\n\n\n\n\n\n\n\n\nNiveau\nCode\nLibellé\nTaille\n\n\n\n\nSection\nH\nTransports et entreposage\n21\n\n\nDivision\n52\nEntreposage et services auxiliaires des transports\n88\n\n\nGroupe\n522\nServices auxiliaires des transports\n272\n\n\nClasse\n5224\nManutention\n615\n\n\nSous-classe\n5224A\nManutention portuaire\n732"
  },
  {
    "objectID": "slides/inserm-echange/index.html#données-utilisées",
    "href": "slides/inserm-echange/index.html#données-utilisées",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Données utilisées",
    "text": "Données utilisées\n\nDonnéesBrutesPré-traitée\n\n\n\nUne observation consiste en :\nDescription textuelle de l’activité - text\n\nCode APE vrai labelisé par le moteur de règles –- APE_SICORE (732 modalités)\nun descriptif textuel de l’activité – LIB_SICORE\nla nature de l’activité – NAT (23 modalités)\nle type de la liasse – TYP (15 modalités)\nle type d’évènement – EVT (24 modalités)\nla surface (\\(m^2\\))– SUR (4 modalités)\n\nPrétraitements standards :\n\nPassage en minuscules\nSuppression de la ponctuation\nSuppression des nombres\nSuppression des stop words\nRacinisation (stemming)\n…\n\n\n\n\n\nviewof table_data = Inputs.table(transpose(data_raw), {\n    rows: 22\n})\n\n\n\n\n\n\n\n\n\nviewof table_data_prepro = Inputs.table(transpose(data_prepro), {\n    rows: 22\n})"
  },
  {
    "objectID": "slides/inserm-echange/index.html#modèle-fasttext",
    "href": "slides/inserm-echange/index.html#modèle-fasttext",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Modèle fastText",
    "text": "Modèle fastText\n\nfastText: Modèle “sac de mots” très simple et rapide (C++)."
  },
  {
    "objectID": "slides/inserm-echange/index.html#prise-en-compte-des-variables-catégorielles",
    "href": "slides/inserm-echange/index.html#prise-en-compte-des-variables-catégorielles",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Prise en compte des variables catégorielles",
    "text": "Prise en compte des variables catégorielles\n\nConcaténation du libellé avec les noms et valeurs des variables annexes :\n\n\n\n\nLibellé\nNAT\nTYP\nEVT\nSUR\n\n\n\n\nCours de musique\nNaN\nX\n01P\nNaN\n\n\n\n\n🢃\n\n“Cours de musique NAT_NaN TYP_X EVT_01P SUR_NaN”\n\nMéthode imparfaite : 3-grams “AT_” ou “T_0” utilisés."
  },
  {
    "objectID": "slides/inserm-echange/index.html#le-paysage-administratif",
    "href": "slides/inserm-echange/index.html#le-paysage-administratif",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Le paysage administratif",
    "text": "Le paysage administratif"
  },
  {
    "objectID": "slides/inserm-echange/index.html#construction-dun-indice-de-confiance",
    "href": "slides/inserm-echange/index.html#construction-dun-indice-de-confiance",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Construction d’un indice de confiance",
    "text": "Construction d’un indice de confiance\n\n\nObjectif : discriminer les mauvaises des bonnes prédictions.\nIndice de confiance retenu : différence entre les deux probabilités les plus élevées."
  },
  {
    "objectID": "slides/inserm-echange/index.html#mise-en-production-actuelle",
    "href": "slides/inserm-echange/index.html#mise-en-production-actuelle",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Mise en production actuelle",
    "text": "Mise en production actuelle\n\n2 issues possibles :\n\ncodification automatique 🚀\nreprise gestionnaire 🔍"
  },
  {
    "objectID": "slides/inserm-echange/index.html#codification-du-flux-de-liasses",
    "href": "slides/inserm-echange/index.html#codification-du-flux-de-liasses",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Codification du flux de liasses",
    "text": "Codification du flux de liasses"
  },
  {
    "objectID": "slides/inserm-echange/index.html#reprise-gestionnaire",
    "href": "slides/inserm-echange/index.html#reprise-gestionnaire",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Reprise gestionnaire",
    "text": "Reprise gestionnaire"
  },
  {
    "objectID": "slides/inserm-echange/index.html#codification-automatique-sur-lihm",
    "href": "slides/inserm-echange/index.html#codification-automatique-sur-lihm",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Codification automatique sur l’IHM",
    "text": "Codification automatique sur l’IHM"
  },
  {
    "objectID": "slides/inserm-echange/index.html#reprise-gestionnaire-sur-lihm",
    "href": "slides/inserm-echange/index.html#reprise-gestionnaire-sur-lihm",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Reprise gestionnaire sur l’IHM",
    "text": "Reprise gestionnaire sur l’IHM"
  },
  {
    "objectID": "slides/inserm-echange/index.html#situation-actuelle-inefficace",
    "href": "slides/inserm-echange/index.html#situation-actuelle-inefficace",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Situation actuelle inefficace",
    "text": "Situation actuelle inefficace\n\nInfrastructure divergente :\n\nModèle entrainé sur la plateforme SSP Cloud 😍\nModule de codification développé en Java au sein d’une architecture monolithique 😫\nDuplication de code et risque d’erreurs"
  },
  {
    "objectID": "slides/inserm-echange/index.html#situation-actuelle-inefficace-1",
    "href": "slides/inserm-echange/index.html#situation-actuelle-inefficace-1",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Situation actuelle inefficace",
    "text": "Situation actuelle inefficace\n\nProblèmes organisationnels :\n\nMéconnaissance des problèmes métier côté Lab pour la maintenance\nContrôle de version et transmission des modèles non centralisés\nOrganisation inefficace entre les parties prenantes"
  },
  {
    "objectID": "slides/inserm-echange/index.html#situation-actuelle-inefficace-2",
    "href": "slides/inserm-echange/index.html#situation-actuelle-inefficace-2",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Situation actuelle inefficace",
    "text": "Situation actuelle inefficace\n\nSpécificités du ML non prises en compte :\n\nPas de surveillance du modèle en temps réel\nPas de données golden standard\nPas de ré-entrainement régulier\n\nConséquence : Besoin d’adopter les bonnes pratiques d’un point de vue technique (MLOps) et organisationel"
  },
  {
    "objectID": "slides/inserm-echange/index.html#notre-implémentation-mlops",
    "href": "slides/inserm-echange/index.html#notre-implémentation-mlops",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Notre implémentation MLOps 🚀",
    "text": "Notre implémentation MLOps 🚀\n\nArchitecture en microservices qui tournent sur un cluster Kubernetes :\n\nContrôle de version des expérimentations et modèles : MLflow\nMise à dispostion du modèle via API: FastAPI\nAutomatisation avec ArgoCD\nDashboard de surveillance : Quarto and DuckDB\nContrôle qualité: annotations avec Label Studio"
  },
  {
    "objectID": "slides/inserm-echange/index.html#mlflow-au-coeur-de-notre-projet",
    "href": "slides/inserm-echange/index.html#mlflow-au-coeur-de-notre-projet",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "MLflow au coeur de notre projet",
    "text": "MLflow au coeur de notre projet"
  },
  {
    "objectID": "slides/inserm-echange/index.html#exposer-un-modèle-via-une-api",
    "href": "slides/inserm-echange/index.html#exposer-un-modèle-via-une-api",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Exposer un modèle via une API",
    "text": "Exposer un modèle via une API\n\nModèle mis à disposition via une API conteneurisée :\n\nSimple pour les utilisateurs\n\n\n\nviewof activite = Inputs.text( \n  {label: '', value: 'Institut National de la Santé et de la Recherche Médicale (INSERM)', width: 800}\n)\n\nurlApe = `https://codification-ape-test.lab.sspcloud.fr/predict?nb_echos_max=4&prob_min=0&text_feature=${activite}&type_liasse=C&event=01P`\n\nd3.json(urlApe).then( res =&gt; {\n  var IC, results;\n  ( {IC, ...results} = res )\n\n  IC = parseFloat(IC)\n\n  const rows = Object.values(results).map( obj =&gt; {\n    return `\n    &lt;tr&gt;\n      &lt;td&gt;${obj.code} | ${obj.libelle}&lt;/td&gt;\n      &lt;td&gt;${obj.probabilite.toFixed(3)}&lt;/td&gt;\n    &lt;/tr&gt;\n  `\n  }).join('')\n  \n  return html`\n  &lt;table&gt;\n    &lt;caption&gt;\n      Indice de confiance : ${IC.toFixed(3)}\n    &lt;/caption&gt;\n    &lt;tr&gt;\n      &lt;th style=\"text-align:center;\"&gt;Libellé (NA2008)&lt;/th&gt;\n      &lt;th&gt;Probabilité&lt;/th&gt;\n    &lt;/tr&gt;\n      ${rows}\n  &lt;/table&gt;`\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { debounce } from \"@mbostock/debouncing-input\""
  },
  {
    "objectID": "slides/inserm-echange/index.html#exposer-un-modèle-via-une-api-1",
    "href": "slides/inserm-echange/index.html#exposer-un-modèle-via-une-api-1",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Exposer un modèle via une API",
    "text": "Exposer un modèle via une API\n\nModèle mis à disposition via une API conteneurisée :\n\nSimple pour les utilisateurs\nFormat de requête standard\nPassage à l’échelle optimisé\nModulaire et portable\n\nDéploiement continu avec Argo CD"
  },
  {
    "objectID": "slides/inserm-echange/index.html#exposer-un-modèle-via-une-api-2",
    "href": "slides/inserm-echange/index.html#exposer-un-modèle-via-une-api-2",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Exposer un modèle via une API",
    "text": "Exposer un modèle via une API"
  },
  {
    "objectID": "slides/inserm-echange/index.html#monitoring",
    "href": "slides/inserm-echange/index.html#monitoring",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Monitoring",
    "text": "Monitoring\n\nSurveiller un modèle ML en production est nécessaire :\n\nPour détecter des distribution drifts dans les données d’entrées\nPour s’assurer qu’il a un comportement stable\nPour savoir quand ré-entraîner le modèle\n\nIdéallement, on voudrait connaître la performance en temps réel mais compliqué.. et coûteux !\nSurveillance technique aussi importante : latence, memoire, usage disque, etc."
  },
  {
    "objectID": "slides/inserm-echange/index.html#monitoring-1",
    "href": "slides/inserm-echange/index.html#monitoring-1",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Monitoring",
    "text": "Monitoring"
  },
  {
    "objectID": "slides/inserm-echange/index.html#contrôle-qualité",
    "href": "slides/inserm-echange/index.html#contrôle-qualité",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Contrôle qualité",
    "text": "Contrôle qualité\n\nDonnées de test collectées et annotées périodiquement\nAnnotation réalisée avec Label Studio\nMétriques de performance calculées sur le jeu de test\nPerformance affichée dans un dashboard de surveillance\nRé-entraînement déclenché lorsque certaines métriques passent un certain seuil (pas encore fait)"
  },
  {
    "objectID": "slides/inserm-echange/index.html#contrôle-qualité-1",
    "href": "slides/inserm-echange/index.html#contrôle-qualité-1",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Contrôle qualité",
    "text": "Contrôle qualité"
  },
  {
    "objectID": "slides/inserm-echange/index.html#dashboard",
    "href": "slides/inserm-echange/index.html#dashboard",
    "title": "Codification automatique de l’APE à l’Insee",
    "section": "Dashboard",
    "text": "Dashboard\nTableau de bord"
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#contexte",
    "href": "slides/seminaire-dms-oct-2022/index.html#contexte",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Contexte",
    "text": "Contexte\n\nPlusieurs changements majeurs :\n\nInterne : Refonte du répertoire Sirene 4.\nExterne : Mise en place d’un guichet unique.\n\nConstat : Sicore n’est plus l’outil adapté ➨ 30% de codification automatique.\nConséquence : moment idéal pour proposer une nouvelle méthodologie de codification automatique de l’APE."
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#données",
    "href": "slides/seminaire-dms-oct-2022/index.html#données",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Données",
    "text": "Données\n\n\\(\\approx\\) 10 millions de liasses d’entreprises issues de Sirene 3 couvrant la période 2014-2022.\nDonnées labellisées par Sicore ou par un gestionnaire.\nUne observation consiste en :\n\nun descriptif textuel de l’activité\nla nature de l’activité – NAT (23 modalités)\nle type de la liasse – TYP (15 modalités)\nle type d’évènement – EVT (24 modalités)\nla surface (\\(m^2\\))– SUR (4 modalités)"
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#la-nomenclature-hiérarchique-de-lape",
    "href": "slides/seminaire-dms-oct-2022/index.html#la-nomenclature-hiérarchique-de-lape",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "La nomenclature hiérarchique de l’APE",
    "text": "La nomenclature hiérarchique de l’APE\n\n\n\n\n\n\n\n\n\nNiveau\nCode\nLibellé\nTaille\n\n\n\n\nSection\nH\nTransports et entreposage\n21\n\n\nDivision\n52\nEntreposage et services auxiliaires des transports\n88\n\n\nGroupe\n522\nServices auxiliaires des transports\n272\n\n\nClasse\n5224\nManutention\n615\n\n\nSous-classe\n5224A\nManutention portuaire\n732"
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#vectorisation-des-libellés",
    "href": "slides/seminaire-dms-oct-2022/index.html#vectorisation-des-libellés",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Vectorisation des libellés",
    "text": "Vectorisation des libellés\n\nPlongements lexicaux : méthode de vectorisation.\nPlongements pré-entraînés disponibles en open-source.\nOn apprend nos propres plongements de mots.\nMais aussi des plongements pour :\n\nLes n-grams de mots et n-grams de caractères."
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#classifieur-linéaire",
    "href": "slides/seminaire-dms-oct-2022/index.html#classifieur-linéaire",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Classifieur linéaire",
    "text": "Classifieur linéaire\n\n2 méthodes pour la classification :\n\nSoftmax : un unique classifieur multiclasse.\nOne-vs-all : de multiples classifieurs binaires.\n\nOptimisation : algorithme de type descente de gradient stochastique.\nFonction de perte : entropie croisée."
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#classification-à-partir-de-plongements-lexicaux",
    "href": "slides/seminaire-dms-oct-2022/index.html#classification-à-partir-de-plongements-lexicaux",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Classification à partir de plongements lexicaux",
    "text": "Classification à partir de plongements lexicaux"
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#implémentation-entraînement",
    "href": "slides/seminaire-dms-oct-2022/index.html#implémentation-entraînement",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Implémentation, entraînement",
    "text": "Implémentation, entraînement\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfastText : librairie rapide (C++) et facilement utilisable.\nOptimisation des paramètres d’entraînement et hyperparamètres avec mlflow."
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#prise-en-compte-des-variables-catégorielles",
    "href": "slides/seminaire-dms-oct-2022/index.html#prise-en-compte-des-variables-catégorielles",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Prise en compte des variables catégorielles",
    "text": "Prise en compte des variables catégorielles\n\nConcaténation du libellé avec les noms et valeurs des variables annexes :\n\n\n\n\nLibellé\nNAT\nTYP\nEVT\nSUR\n\n\n\n\nCours de musique\nNaN\nX\n01P\nNaN\n\n\n\n\n🢃\n\n“Cours de musique NAT_NaN TYP_X EVT_01P SUR_NaN”\n\nMéthode imparfaite : 3-grams “AT_” ou “T_0” utilisés."
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#prétraitements-effectués",
    "href": "slides/seminaire-dms-oct-2022/index.html#prétraitements-effectués",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Prétraitements effectués",
    "text": "Prétraitements effectués\n\nNettoyage indispensable pour l’analyse textuelle.\nContrainte : simple, léger et facilement reproductible en Java.\n\n\n\n\n\n\n\n\nTransformation\nLibellé\n\n\n\n\nEntrée\n3 D : La Deratisation - La Desinsectisation - La Desinfection\n\n\nPassage en minuscule\n3 d : la deratisation - la desinsectisation - la desinfection\n\n\nSuppression des ponctuations\n3 d la deratisation la desinsectisation la desinfection"
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#prétraitements-effectués-1",
    "href": "slides/seminaire-dms-oct-2022/index.html#prétraitements-effectués-1",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Prétraitements effectués",
    "text": "Prétraitements effectués\n\n\n\n\n\n\n\nTransformation\nLibellé\n\n\n\n\nEntrée\n3 D : La Deratisation - La Desinsectisation - La Desinfection\n\n\n…\n…\n\n\nSuppression des chiffres\nd la deratisation la desinsectisation la desinfection\n\n\nSuppression des mots à une lettre\nla deratisation la desinsectisation la desinfection\n\n\nSuppression des stopwords\nderatisation desinsectisation desinfection"
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#prétraitements-effectués-2",
    "href": "slides/seminaire-dms-oct-2022/index.html#prétraitements-effectués-2",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Prétraitements effectués",
    "text": "Prétraitements effectués\n\n\n\n\n\n\n\nTransformation\nLibellé\n\n\n\n\nEntrée\n3 D : La Deratisation - La Desinsectisation - La Desinfection\n\n\n…\n…\n\n\nSuppression des NaN\nderatisation desinsectisation desinfection\n\n\nRacinisation des mots\nderatis desinsectis desinfect"
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#évaluation-de-la-performance",
    "href": "slides/seminaire-dms-oct-2022/index.html#évaluation-de-la-performance",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Évaluation de la performance",
    "text": "Évaluation de la performance\n\nÉvaluation sur 2 jeux de données :\n\nun jeu de test, 20% des données soit \\(\\approx\\) 2.5 millions observations\nun jeu issue du guichet unique \\(\\approx\\) 15 000 observations\n\n\n\n\nFigure 1: Précision en fonction du taux de reprise manuelle effectuée."
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#évaluation-de-la-performance-1",
    "href": "slides/seminaire-dms-oct-2022/index.html#évaluation-de-la-performance-1",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Évaluation de la performance",
    "text": "Évaluation de la performance\n\n4 métriques pour l’analyse de la performance :\n\nLe taux de précision : taux global de liasses bien prédites (accuracy).\nLe rappel : taux de bonnes prédictions de la classe K parmi les vraies valeurs K.\nLa précision : taux de bonnes prédictions de la classe K parmi les prédictions K.\nLe score F1 : Moyenne harmonique du rappel et de la précision."
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#une-bonne-performance-globale",
    "href": "slides/seminaire-dms-oct-2022/index.html#une-bonne-performance-globale",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Une bonne performance globale",
    "text": "Une bonne performance globale\n\n\nFigure 2: Taux de précision pour chaque niveau de la nomenclature du code APE.\n\nPrès de 80% des libellés issus du guichet unique sont correctement codifiés.\nErreurs de prédiction proches dans la nomenclature."
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#une-aide-à-la-reprise-manuelle",
    "href": "slides/seminaire-dms-oct-2022/index.html#une-aide-à-la-reprise-manuelle",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Une aide à la reprise manuelle",
    "text": "Une aide à la reprise manuelle\n\n\nFigure 3: Top-K Accuracy pour chaque jeu de données.\n\nConnaissance des probabilités pour chaque classe.\nDans 94% des cas, la bonne classification se trouve dans les 5 prédictions les plus probables."
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#une-performance-hétérogène-en-fonction-des-classes",
    "href": "slides/seminaire-dms-oct-2022/index.html#une-performance-hétérogène-en-fonction-des-classes",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Une performance hétérogène en fonction des classes",
    "text": "Une performance hétérogène en fonction des classes\n\n\nFigure 4: Distribution du F1-score en fonction de la fréquence des classes.\n\nPerformance mitigée sur plusieurs classes peu fréquentes."
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#construction-dun-indice-de-confiance",
    "href": "slides/seminaire-dms-oct-2022/index.html#construction-dun-indice-de-confiance",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Construction d’un indice de confiance",
    "text": "Construction d’un indice de confiance\n\n\nFigure 5: Distribution de l’indice de confiance en fonction du résultat de la prédiction.\n\nObjectif : discriminer les mauvaises des bonnes prédictions.\nIndice de confiance retenu : différence entre les deux probabilités les plus élevées."
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#efficacité-de-la-reprise-manuelle",
    "href": "slides/seminaire-dms-oct-2022/index.html#efficacité-de-la-reprise-manuelle",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Efficacité de la reprise manuelle",
    "text": "Efficacité de la reprise manuelle\n\n\nFigure 6: Précision en fonction du taux de reprise manuelle effectuée.\n\nOptimisation de la reprise manuelle ➨ gain de performance."
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#organisation-prévue",
    "href": "slides/seminaire-dms-oct-2022/index.html#organisation-prévue",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Organisation prévue",
    "text": "Organisation prévue\n\nIntégration dans Sirene 4 pour coder le guichet unique.\nModule de codification : API construite sur JFastText.\nDéfinition du contenu des logs pour contrôle futur.\nDouble rôle du SSP Lab à moyen terme :\n\nLivraison des modèles entraînés.\nContrôle qualité.\n\n\n\n\n\n\n\n\nÀ clarifier\n\n\n\nIdentification des liasses non-codables.\nUtilisation du module comme aide à la reprise manuelle."
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#organisation-à-terme",
    "href": "slides/seminaire-dms-oct-2022/index.html#organisation-à-terme",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Organisation à terme ?",
    "text": "Organisation à terme ?"
  },
  {
    "objectID": "slides/seminaire-dms-oct-2022/index.html#problématiques-pour-la-codification-en-production",
    "href": "slides/seminaire-dms-oct-2022/index.html#problématiques-pour-la-codification-en-production",
    "title": "Codification automatique de l’APE dans le cadre du projet Sirene 4",
    "section": "Problématiques pour la codification en production",
    "text": "Problématiques pour la codification en production\n\nGestion des versions des modèles en production ?\nContrôle du modèle en production : quoi et à quelle fréquence ?\nContrôle des entrées à coder ?\nRéentraînement d’un modèle : comment et à quelle fréquence ?\nUtilisation et maintenance des différents modules ?\nGestion des changements de nomenclature ?"
  },
  {
    "objectID": "slides/unece-conf/index.html#context-1",
    "href": "slides/unece-conf/index.html#context-1",
    "title": "Classifying companies in France using machine learning",
    "section": "Context",
    "text": "Context\n\nSeveral major changes:\n\nInternal: Revamping of the French company registry, Sirene 4.\nExternal: Implementation of a one-stop shop to declare the creation of a business.\n\nObservation: Sicore is no longer a suitable tool ➨ 30% automated coding.\nConsequence: Ideal moment to propose a new methodology for automated NACE coding."
  },
  {
    "objectID": "slides/unece-conf/index.html#data",
    "href": "slides/unece-conf/index.html#data",
    "title": "Classifying companies in France using machine learning",
    "section": "Data",
    "text": "Data\n\n\\(\\approx\\) 10 million observations from Sirene 3 covering the period 2014-2022.\nData labeled both by Sicore and manually.\nAn observation consists of:\n\nA textual description of the activity\nThe nature of the activity – NAT (23 categories)\nThe type of form – TYP (15 categories)\nThe type of event – EVT (24 categories)\nThe area (\\(m^2\\)) – SUR (4 categories)"
  },
  {
    "objectID": "slides/unece-conf/index.html#hierarchical-structure-of-nace-rev.-2",
    "href": "slides/unece-conf/index.html#hierarchical-structure-of-nace-rev.-2",
    "title": "Classifying companies in France using machine learning",
    "section": "Hierarchical structure of NACE Rev. 2",
    "text": "Hierarchical structure of NACE Rev. 2\n\n\n\n\n\n\n\n\n\n\nLevel\nNACE\nTitle\nSize\n\n\n\n\nSection\nH\nTransportation and storage\n21\n\n\nDivision\n52\nWarehousing and support activities for transportation\n88\n\n\nGroup\n522\nSupport activities for transportation\n272\n\n\nClass\n5224\nCargo handling\n615\n\n\nSubclass\n5224A\nHarbour handling\n732"
  },
  {
    "objectID": "slides/unece-conf/index.html#feature-extraction",
    "href": "slides/unece-conf/index.html#feature-extraction",
    "title": "Classifying companies in France using machine learning",
    "section": "Feature extraction",
    "text": "Feature extraction\n\nWord embedding: a method of vectorisation.\nPre-trained embeddings available in open-source.\nWe learn our own word embeddings.\nAdditionally, embeddings for:\n\nword n-grams and character n-grams."
  },
  {
    "objectID": "slides/unece-conf/index.html#linear-classifer",
    "href": "slides/unece-conf/index.html#linear-classifer",
    "title": "Classifying companies in France using machine learning",
    "section": "Linear classifer",
    "text": "Linear classifer\n\n2 classification methods:\n\nSoftmax: a single multiclass classifier.\nOne-vs-all: multiple binary classifiers.\n\nOptimisation: stochastic gradient descent algorithm.\nLoss function: cross-entropy."
  },
  {
    "objectID": "slides/unece-conf/index.html#fasttext-model",
    "href": "slides/unece-conf/index.html#fasttext-model",
    "title": "Classifying companies in France using machine learning",
    "section": "fastText model",
    "text": "fastText model\n\nfastText: very simple and fast (C++) “bag of n-grams” model."
  },
  {
    "objectID": "slides/unece-conf/index.html#handling-categorical-variables",
    "href": "slides/unece-conf/index.html#handling-categorical-variables",
    "title": "Classifying companies in France using machine learning",
    "section": "Handling categorical variables",
    "text": "Handling categorical variables\n\nConcatenation of the text description with the names and values of the auxiliary variables:\n\n\n\n\nText\nNAT\nTYP\nEVT\nSUR\n\n\n\n\nCours de musique\nNaN\nX\n01P\nNaN\n\n\n\n\n🢃\n\n“Cours de musique NAT_NaN TYP_X EVT_01P SUR_NaN”\n\nImperfect method: 3-grams “AT_” or “T_0” used."
  },
  {
    "objectID": "slides/unece-conf/index.html#preprocessing",
    "href": "slides/unece-conf/index.html#preprocessing",
    "title": "Classifying companies in France using machine learning",
    "section": "Preprocessing",
    "text": "Preprocessing\n\nPreprocessing essential for natural language processing.\nConstraints: simple, light and easily reproducible in Java .\n\n\n\n\n\n\n\n\nTransformation\nText description\n\n\n\n\nInput\n3 D: La Deratisation - La Desinsectisation - La Desinfection\n\n\nLower-case conversion\n3 d: la deratisation - la desinsectisation - la desinfection\n\n\nPunctuations removal\n3 d la deratisation la desinsectisation la desinfection"
  },
  {
    "objectID": "slides/unece-conf/index.html#preprocessing-1",
    "href": "slides/unece-conf/index.html#preprocessing-1",
    "title": "Classifying companies in France using machine learning",
    "section": "Preprocessing",
    "text": "Preprocessing\n\n\n\n\n\n\n\nTransformation\nText description\n\n\n\n\nInput\n3 D: La Deratisation - La Desinsectisation - La Desinfection\n\n\n…\n…\n\n\nNumbers removal\nd la deratisation la desinsectisation la desinfection\n\n\nOne-letter word removal\nla deratisation la desinsectisation la desinfection\n\n\nStopwords removal\nderatisation desinsectisation desinfection"
  },
  {
    "objectID": "slides/unece-conf/index.html#preprocessing-2",
    "href": "slides/unece-conf/index.html#preprocessing-2",
    "title": "Classifying companies in France using machine learning",
    "section": "Preprocessing",
    "text": "Preprocessing\n\n\n\nTransformation\nText description\n\n\n\n\nInput\n3 D: La Deratisation - La Desinsectisation - La Desinfection\n\n\n…\n…\n\n\nNaN removal\nderatisation desinsectisation desinfection\n\n\nStemming\nderatis desinsectis desinfect"
  },
  {
    "objectID": "slides/unece-conf/index.html#a-good-overall-performance",
    "href": "slides/unece-conf/index.html#a-good-overall-performance",
    "title": "Classifying companies in France using machine learning",
    "section": "A good overall performance",
    "text": "A good overall performance\n\n\nFigure 1: Accuracy for various level of the NACE nomenclature.\n\nNearly 80% of labels from the one-stop shop are correctly coded.\nMost prediction errors are close in the nomenclature."
  },
  {
    "objectID": "slides/unece-conf/index.html#streamlining-the-manual-coding-process",
    "href": "slides/unece-conf/index.html#streamlining-the-manual-coding-process",
    "title": "Classifying companies in France using machine learning",
    "section": "Streamlining the manual coding process",
    "text": "Streamlining the manual coding process\n\n\nFigure 2: Top-\\(k\\) accuracy per sample.\n\nKnowledge of probabilities for each class.\nThe correct classification is among the top 5 most probable predictions in 94% of cases."
  },
  {
    "objectID": "slides/unece-conf/index.html#building-a-confidence-index",
    "href": "slides/unece-conf/index.html#building-a-confidence-index",
    "title": "Classifying companies in France using machine learning",
    "section": "Building a confidence index",
    "text": "Building a confidence index\n\n\nFigure 3: Distribution of the confidence index based on prediction results.\n\nObjective: discriminate between bad and good predictions.\nSelected Confidence Index: difference between the two highest probabilities."
  },
  {
    "objectID": "slides/unece-conf/index.html#efficiency-of-the-manual-coding-process",
    "href": "slides/unece-conf/index.html#efficiency-of-the-manual-coding-process",
    "title": "Classifying companies in France using machine learning",
    "section": "Efficiency of the manual coding process",
    "text": "Efficiency of the manual coding process\n\n\nFigure 4: Accuracy for various shares of manual coding.\n\nOptimisation of manual coding process ➨ Performance improvement."
  },
  {
    "objectID": "slides/unece-conf/index.html#deployment-of-the-model",
    "href": "slides/unece-conf/index.html#deployment-of-the-model",
    "title": "Classifying companies in France using machine learning",
    "section": "Deployment of the model",
    "text": "Deployment of the model\n\nModels have been deployed in a production environment since November 2022.\nEmerging new challenges include:\n\nOrganisational issues.\nReal-time monitoring.\nRegular re-training.\n\nMLOps approach is required:\n\nJoin us on Wednesday, June 7th for a Hands-on Lab!"
  }
]