[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Pr√©sentations codification automatique de l'APE",
    "section": "",
    "text": "Tous les supports sont accessibles et modifiables sur Github InseeFrLab \n\n\n\n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : S√©minaire interne du d√©partement des m√©thodes statistiques de l'Insee\n\n            \n\n            \n            \n              \n                Thomas Faria et Tom Seimandi\n                Sep 1, 2023\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Pr√©sentation lors de l'√©v√®nement de lancement du SSP Hub\n\n            \n\n            \n            \n              \n                Thomas Faria et Tom Seimandi\n                Apr 17, 2023\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Presentation given during the UNECE Machine Learning for Official Statistics Workshop 2023\n\n            \n\n            \n            \n              \n                Thomas Faria and Tom Seimandi\n                Jun 5, 2023\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Pr√©sentation pour la formation Big Data donn√© √† la BCEAO √† Dakar\n\n            \n\n            \n            \n              \n                Romain Avouac, Thomas Faria et Tom Seimandi\n                Sep 27, 2023\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Slides used for an exchange with StatCan on MLOps\n\n            \n\n            \n            \n              \n                Romain Avouac, Thomas Faria et Tom Seimandi\n                Mar 19, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Presentation given during the NACE implementation webinar\n\n            \n\n            \n            \n              \n                Nathan Randriamanana\n                Apr 30, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Codification automatique de l'APE √† l'Insee\n\n            \n\n            \n            \n              \n                Thomas Faria et Nathan Randriamanana\n                May 7, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Retraining strategies for an economic activity classification model\n\n            \n\n            \n            \n              \n                Thomas Faria, Nathan Randriamanana, Tom Seimandi\n                May 24, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n                \n                  \n                    \n                      \n                        Paper\n                      \n                    \n                  \n                \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025\n\n            \n\n            \n            \n              \n                Thomas Faria, Nathan Randriamanana\n                Nov 6, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Pr√©sentation du package torchFastText et ses performances sur la codification de l'APE\n\n            \n\n            \n            \n              \n                Meilame Tayebjee\n                Mar 5, 2025\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Pr√©sentation non technique de la codification automatique de la NAF\n\n            \n\n            \n            \n              \n                Meilame Tayebjee\n                Apr 4, 2025\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Presentation given during the UNECE Generative AI and Official Statistics Workshop 2025\n\n            \n\n            \n            \n              \n                Thomas Faria\n                May 12, 2025\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n\n\nNo matching items"
  },
  {
    "objectID": "index.html#pr√©sentations-relatives-√†-la-codification-automatique-de-lape",
    "href": "index.html#pr√©sentations-relatives-√†-la-codification-automatique-de-lape",
    "title": "Pr√©sentations codification automatique de l'APE",
    "section": "",
    "text": "Tous les supports sont accessibles et modifiables sur Github InseeFrLab \n\n\n\n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : S√©minaire interne du d√©partement des m√©thodes statistiques de l'Insee\n\n            \n\n            \n            \n              \n                Thomas Faria et Tom Seimandi\n                Sep 1, 2023\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Pr√©sentation lors de l'√©v√®nement de lancement du SSP Hub\n\n            \n\n            \n            \n              \n                Thomas Faria et Tom Seimandi\n                Apr 17, 2023\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Presentation given during the UNECE Machine Learning for Official Statistics Workshop 2023\n\n            \n\n            \n            \n              \n                Thomas Faria and Tom Seimandi\n                Jun 5, 2023\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Pr√©sentation pour la formation Big Data donn√© √† la BCEAO √† Dakar\n\n            \n\n            \n            \n              \n                Romain Avouac, Thomas Faria et Tom Seimandi\n                Sep 27, 2023\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Slides used for an exchange with StatCan on MLOps\n\n            \n\n            \n            \n              \n                Romain Avouac, Thomas Faria et Tom Seimandi\n                Mar 19, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Presentation given during the NACE implementation webinar\n\n            \n\n            \n            \n              \n                Nathan Randriamanana\n                Apr 30, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Codification automatique de l'APE √† l'Insee\n\n            \n\n            \n            \n              \n                Thomas Faria et Nathan Randriamanana\n                May 7, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Retraining strategies for an economic activity classification model\n\n            \n\n            \n            \n              \n                Thomas Faria, Nathan Randriamanana, Tom Seimandi\n                May 24, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n                \n                  \n                    \n                      \n                        Paper\n                      \n                    \n                  \n                \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025\n\n            \n\n            \n            \n              \n                Thomas Faria, Nathan Randriamanana\n                Nov 6, 2024\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Pr√©sentation du package torchFastText et ses performances sur la codification de l'APE\n\n            \n\n            \n            \n              \n                Meilame Tayebjee\n                Mar 5, 2025\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Pr√©sentation non technique de la codification automatique de la NAF\n\n            \n\n            \n            \n              \n                Meilame Tayebjee\n                Apr 4, 2025\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              Description : Presentation given during the UNECE Generative AI and Official Statistics Workshop 2025\n\n            \n\n            \n            \n              \n                Thomas Faria\n                May 12, 2025\n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n\n\nNo matching items"
  },
  {
    "objectID": "slides/unece-2025/index.html#ml-model-robustness",
    "href": "slides/unece-2025/index.html#ml-model-robustness",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "ML Model Robustness",
    "text": "ML Model Robustness\n\nML models are trained using reference datasets tailored for a specific task.\nIn practice, real-world data often drifts over time from these reference datasets ‚û°Ô∏è performance degradation?\nRegular retraining becomes essential.\nA particularly challenging case in official statistics is the change in the classification."
  },
  {
    "objectID": "slides/unece-2025/index.html#timeline-for-adoption",
    "href": "slides/unece-2025/index.html#timeline-for-adoption",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "Timeline for Adoption üóìÔ∏è",
    "text": "Timeline for Adoption üóìÔ∏è\n\nPhased adoption approach:\n2025 ‚û°Ô∏è dual labeling in both NACE R√©v. 2 and 2.1\n2026 ‚û°Ô∏è improving the NACE R√©v. 2.1. classifier model\n2027 ‚û°Ô∏è full NACE R√©v. 2.1 classification while maintaining legacy NACE R√©v. 2 codes for specific usages."
  },
  {
    "objectID": "slides/unece-2025/index.html#whats-new-in-nace-r√©v.-2.1",
    "href": "slides/unece-2025/index.html#whats-new-in-nace-r√©v.-2.1",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "What‚Äôs New in NACE R√©v. 2.1?",
    "text": "What‚Äôs New in NACE R√©v. 2.1?\n\nAt level 5: 746 sub-classes compared to 732 before.\nMainly fine-grained splits at class level (level 4), but not exclusively.\n551 unambiguous mappings, i.e., one-to-one correspondence ‚û°Ô∏è ideal case! üëå"
  },
  {
    "objectID": "slides/unece-2025/index.html#ambiguous-cases",
    "href": "slides/unece-2025/index.html#ambiguous-cases",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "Ambiguous Cases",
    "text": "Ambiguous Cases\n\n181 ambiguous mappings, i.e., one-to-many ‚û°Ô∏è challenging! üö©\nRequires expert review for proper recoding.\n\n\n\n\nShow distribution of ambiguous codes\n\n\n\n\n1-to-N\n# occurence\n\n\n\n\n2\n109\n\n\n3\n30\n\n\n4\n24\n\n\n5\n6\n\n\n6\n4\n\n\n8\n1\n\n\n9\n2\n\n\n21\n1\n\n\n27\n1\n\n\n36\n1\n\n\n38\n2"
  },
  {
    "objectID": "slides/unece-2025/index.html#multiple-challenges",
    "href": "slides/unece-2025/index.html#multiple-challenges",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "Multiple Challenges",
    "text": "Multiple Challenges\n\nNeed to recode the stock of the registry forms ‚û°Ô∏è over 14 million entries.\nBuilding a classifier for new data flow requires a clean stock base as a training dataset.\nPrevious fastText model trained on over 10 million labeled entries.\nPerformance is highly sensitive to training data volume."
  },
  {
    "objectID": "slides/unece-2025/index.html#available-data",
    "href": "slides/unece-2025/index.html#available-data",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "Available Data",
    "text": "Available Data\n\nOld registry dataset: \\(~10\\) million entries, but poorly suited for new labels.\nNew registry dataset: \\(~2.7\\) million entries.\n\nUnambiguous: \\(1.3\\) million, covering 504 sub-classes.\nAmbiguous: \\(1.4\\) million, covering 177 sub-classes.\n\nManual annotation campaign is critical."
  },
  {
    "objectID": "slides/unece-2025/index.html#annotation-campaign",
    "href": "slides/unece-2025/index.html#annotation-campaign",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "Annotation Campaign",
    "text": "Annotation Campaign\n\nAnnotation launched since mid-2024.\nFocused on uniquely ambiguous cases.\nüéØ Dual objectives:\n\nAssign a NACE R√©v. 2.1 code üöÄ\nAssess NACE R√©v. 2 code quality üó∏\nCurrent count: \\(~27k\\) annotated entries‚Ä¶ still insufficient!"
  },
  {
    "objectID": "slides/unece-2025/index.html#methodology",
    "href": "slides/unece-2025/index.html#methodology",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "Methodology",
    "text": "Methodology\n\nüéØ Goal: Build the most comprehensive training dataset possible.\nOne-shot experimentation ‚û°Ô∏è not intended for production reproducibility.\nLeveraging LLMs for automated NACE R√©v. 2.1 labeling.\nData used:\n\nNew registry stock dataset (\\(~2.7M\\) records)\nMapping table from NACE experts\nNACE explanatory notes\nManually annotated data (\\(~27k\\) entries)"
  },
  {
    "objectID": "slides/unece-2025/index.html#methodology-1",
    "href": "slides/unece-2025/index.html#methodology-1",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "Methodology",
    "text": "Methodology"
  },
  {
    "objectID": "slides/unece-2025/index.html#leveraging-llms",
    "href": "slides/unece-2025/index.html#leveraging-llms",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "Leveraging LLMs",
    "text": "Leveraging LLMs\n\nAugmented Generation (RAG/CAG) vs fine-tunning\n\n\nRAG: Unstructured prior knowledge based on similarity of notes embeddings\nCAG: Structured prior knowledge based on known mappings\n\n\nüí° Core idea ‚û°Ô∏è Provide key information to the LLM to translate NACE R√©v. 2 into 2.1\n\n\n\n\n\n\n\nWarning\n\n\nRAG can act like a zero-shot classifier, while CAG is not a classifier as it relies on prior knowledge."
  },
  {
    "objectID": "slides/unece-2025/index.html#prompt-design",
    "href": "slides/unece-2025/index.html#prompt-design",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "Prompt Design",
    "text": "Prompt Design\n\nA common system prompt for all entries\n\n\nAfficher le prompt syt√®me\n\nTu es un expert de la Nomenclature statistique des Activit√©s √©conomiques dans la Communaut√© Europ√©enne (NACE). Tu es charg√© de r√©aliser le changement de nomenclature. Ta mission consiste √† attribuer un code NACE 2025 √† une entreprise, en t'appuyant sur le descriptif de son activit√© et √† partir d'une liste de codes propos√©s (identifi√©e √† partir de son code NACE 2008 existant). Voici les instructions √† suivre:\n1. Analyse la description de l'activit√© principale de l'entreprise et le code NACE 2008 fourni par l'utilisateur.\n2. √Ä partir de la liste des codes NACE 2025 disponible, identifie la cat√©gorie la plus appropri√©e qui correspond √† l'activit√© principale de l'entreprise.\n3. Retourne le code NACE 2025 au format JSON comme sp√©cifi√© par l'utilisateur. Si la description de l'activit√© de l'entreprise n'est pas suffisamment pr√©cise pour identifier un code NACE 2025 ad√©quat, retourne `null` dans le JSON.\n4. √âvalue la coh√©rence entre le code NACE 2008 fourni et la description de l'activit√© de l'entreprise. Si le code NACE 2008 ne semble pas correspondre √† cette description, retourne `False` dans le champ `nace08_valid` du JSON. Note que si tu arrives √† classer la description de l'activit√© de l'entreprise dans un code NACE 2025, le champ `nace08_valid` devrait `True`, sinon il y a incoh√©rence.\n5. R√©ponds seulement avec le JSON compl√©t√© aucune autres information ne doit √™tre retourn√©.\n\nEach observation gets a custom prompt including:\n\nBusiness activity description\nOriginal NACE R√©v. 2 code (in CAG)\nCandidate codes list from retriever\n\nInstruction on output format required."
  },
  {
    "objectID": "slides/unece-2025/index.html#output-validation",
    "href": "slides/unece-2025/index.html#output-validation",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "Output Validation",
    "text": "Output Validation\n\nLLMs tend to be overly verbose\nResponses shaped into structured, minimal format\nJSON is the preferred schema.\n\n\n\nShow expected response format\n\n{\n    \"codable\": true,\n    \"nace_2008_valid\": true,\n    \"nace2025\": \"0147J\" \n}\n\n\nResponse parsing:\n\nFormat check\nDetecting hallucinations"
  },
  {
    "objectID": "slides/unece-2025/index.html#evaluation-challenge",
    "href": "slides/unece-2025/index.html#evaluation-challenge",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "Evaluation Challenge",
    "text": "Evaluation Challenge\n\n‚ùì Key question: How to evaluate an LLM?:\nClassification seems simpler‚Ä¶ but complexity of taxonomy matters.\nUsed \\(27k\\) manual annotations as the benchmark ü•á\n3 performance metrics:\n\nOverall accuracy\nAccuracy among codable entries\nAccuracy of LLM-only decisions"
  },
  {
    "objectID": "slides/unece-2025/index.html#performance-of-models",
    "href": "slides/unece-2025/index.html#performance-of-models",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "Performance of models",
    "text": "Performance of models"
  },
  {
    "objectID": "slides/unece-2025/index.html#reconstructing-ambiguous-dataset",
    "href": "slides/unece-2025/index.html#reconstructing-ambiguous-dataset",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "Reconstructing Ambiguous Dataset",
    "text": "Reconstructing Ambiguous Dataset\n\nüí°Idea: Treat LLMs as additional annotators\n‚ùìCan we boost performance via ensemble methods?\nBuilt 3 more annotations:\n\n\nCascade selection\nMajority vote\nWeighted vote"
  },
  {
    "objectID": "slides/unece-2025/index.html#annotation-fusion",
    "href": "slides/unece-2025/index.html#annotation-fusion",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "Annotation Fusion",
    "text": "Annotation Fusion"
  },
  {
    "objectID": "slides/unece-2025/index.html#retraining-with-nace-r√©v.-2.1",
    "href": "slides/unece-2025/index.html#retraining-with-nace-r√©v.-2.1",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "Retraining with NACE R√©v. 2.1",
    "text": "Retraining with NACE R√©v. 2.1\n\nRebuilt new registry dataset with NACE R√©v. 2.1 (~2M records)\nData distribution unchanged\nNew registry variables used\nAchieved comparable performance to NACE R√©v. 2 model"
  },
  {
    "objectID": "slides/unece-2025/index.html#retraining-accuracy",
    "href": "slides/unece-2025/index.html#retraining-accuracy",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "Retraining Accuracy",
    "text": "Retraining Accuracy"
  },
  {
    "objectID": "slides/unece-2025/index.html#the-nace-r√©v.-2.1-model",
    "href": "slides/unece-2025/index.html#the-nace-r√©v.-2.1-model",
    "title": "NACE R√©v. 2.1 update: Retraining an ML model in production using LLM",
    "section": "The NACE R√©v. 2.1 Model",
    "text": "The NACE R√©v. 2.1 Model\n\nviewof activite = Inputs.text(\n  {label: '', value: 'coiffeur', width: 800}\n)\n\nurlApe = `https://codification-ape-dev.lab.sspcloud.fr/predict?description_activity=${activite}%20&type_form=X&event=01P&nb_echos_max=3&prob_min=0.0009`\n\nd3.json(urlApe).then( res =&gt; {\n  var IC, results;\n  ( {IC, ...results} = res )\n\n  IC = parseFloat(IC)\n\n  const rows = Object.values(results).map( obj =&gt; {\n    return `\n    &lt;tr&gt;\n      &lt;td&gt;${obj.code} | ${obj.libelle}&lt;/td&gt;\n      &lt;td&gt;${obj.probabilite.toFixed(3)}&lt;/td&gt;\n    &lt;/tr&gt;\n  `\n  }).join('')\n  \n  return html`\n  &lt;table&gt;\n    &lt;caption&gt;\n      Confidence index: ${IC.toFixed(3)}\n    &lt;/caption&gt;\n    &lt;tr&gt;\n      &lt;th style=\"text-align:center;\"&gt;Description (NACE R√©v. 2.1)&lt;/th&gt;\n      &lt;th&gt;Probabilit√©&lt;/th&gt;\n    &lt;/tr&gt;\n      ${rows}\n  &lt;/table&gt;`\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { debounce } from \"@mbostock/debouncing-input\""
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#les-mod√®les-de-ml-en-production",
    "href": "slides/grp-veille-codif-auto-9/index.html#les-mod√®les-de-ml-en-production",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "Les mod√®les de ML en production",
    "text": "Les mod√®les de ML en production\n\nDe plus en plus de mod√®le ML sont vou√©s √† √™tre mis en production √† l‚ÄôInsee\nMultiples cas d‚Äôusages : codification automatique, imputation, d√©tection de valeurs extr√™mes\n\n\n\n\nQuality Assurance Framework of the European Statistical System\n\n\nSource data, integrated data, intermediate results and statistical outputs must be regularly assessed and validated.\n\n\n\n\nCela s‚Äôapplique √©videmment aux mod√®les de ML dans le processus de production statistique ‚û°Ô∏è besoin de maintenance dans le temps"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#qualit√©-des-mod√®les-ml",
    "href": "slides/grp-veille-codif-auto-9/index.html#qualit√©-des-mod√®les-ml",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "Qualit√© des mod√®les ML",
    "text": "Qualit√© des mod√®les ML\n\nUn mod√®le ML est entrain√© pour r√©soudre un t√¢che √† partir de donn√©es de r√©f√©rence\nDonn√©es r√©elles peuvent d√©vier de ces donn√©es de r√©f√©rences dans le temps ‚û°Ô∏è perte de performance ?\nR√©-entrainement du mod√®le devient n√©cessaire\nCas extr√™me courant dans le cas de la statistique publique ‚û°Ô∏è changement de nomenclature"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#historique-du-projet-ape",
    "href": "slides/grp-veille-codif-auto-9/index.html#historique-du-projet-ape",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "Historique du projet APE",
    "text": "Historique du projet APE\n\nEt√© 2022 : entra√Ænement d‚Äôun mod√®le fasttext sur les donn√©es Sirene 3\nNovembre 2022 : 1√®re mise en production (partielle) d‚Äôun mod√®le ML.\nJanvier 2023 : Prise en compte des valideurs dans Sirene 4 : √©ligibilit√© de l‚Äôactivit√© du d√©clarant (CMA,‚Ä¶)\nMai 2023 : 1er r√©-entrainement pour corriger un probl√®me de classification\nMars 2024 : Toutes les liasses passent par fasttext. Compl√®te bascule de Sirene 3 √† 4\nEt maintenant ?"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#enjeux-actuels",
    "href": "slides/grp-veille-codif-auto-9/index.html#enjeux-actuels",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "Enjeux actuels",
    "text": "Enjeux actuels\n\nPlusieurs probl√©matiques :\n\nMod√®le entrain√© sur les donn√©es Sirene 3\nChangement de nomenclature NAF 2008 vers NAF 2025\nExplicabilit√© du mod√®le pour les gestionnaires\n\nGroupe de veille n¬∞10 en janvier üìÖ"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#calendrier-pour-ladoption-de-la-nouvelle-naf",
    "href": "slides/grp-veille-codif-auto-9/index.html#calendrier-pour-ladoption-de-la-nouvelle-naf",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "Calendrier pour l‚Äôadoption de la nouvelle NAF üóìÔ∏è",
    "text": "Calendrier pour l‚Äôadoption de la nouvelle NAF üóìÔ∏è\n\nVers une adoption transitoire\n2025 ‚û°Ô∏è double codification en NAF 2025\n\nSirus : recodification pour fin 2025\nSirene : Int√©gration de la NAF 2025 en flux et d‚Äôune infrastructure MLOps-compatible\n\n2026 ‚û°Ô∏è am√©lioration de la codification en NAF 2025\n2027 ‚û°Ô∏è codification en NAF 2025 avec maintien de la codification NAF 2008"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#naf-2025-quels-changements",
    "href": "slides/grp-veille-codif-auto-9/index.html#naf-2025-quels-changements",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "NAF 2025 : quels changements ?",
    "text": "NAF 2025 : quels changements ?\n\nAu niveau 5 : 746 sous classes contre 732 auparavant\nPrincipalement des √©clatements au niveau de la classe (niveau 4) ‚Ä¶ mais pas que !\n551 classes univoques, correspondance 1-pour-1 ‚û°Ô∏è cas id√©al ! üëå"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#naf-2025-les-cas-multivoques",
    "href": "slides/grp-veille-codif-auto-9/index.html#naf-2025-les-cas-multivoques",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "NAF 2025 : les cas multivoques",
    "text": "NAF 2025 : les cas multivoques\n\n181 classes multivoques, correspondance 1-pour-N ‚û°Ô∏è cas probl√©matiques ! üö©\nBesoin d‚Äôun expert pour d√©terminer le nouveau code\n\n\n\n\nAfficher la distribution des codes multivoques\n\n\n\n\n1-to-N\n# occurence\n\n\n\n\n2\n109\n\n\n3\n30\n\n\n4\n24\n\n\n5\n6\n\n\n6\n4\n\n\n8\n1\n\n\n9\n2\n\n\n21\n1\n\n\n27\n1\n\n\n36\n1\n\n\n38\n2"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#enjeux-et-besoins-multiples",
    "href": "slides/grp-veille-codif-auto-9/index.html#enjeux-et-besoins-multiples",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "Enjeux et besoins multiples",
    "text": "Enjeux et besoins multiples\n\nBesoin de recoder le stock de liasse de Sirene ‚û°Ô∏è + \\(14\\) millions‚Ä¶\nPouvoir coder le flux en NAF 2025 ‚û°Ô∏è entra√Æner un mod√®le ‚û°Ô∏è besoin d‚Äôavoir un stock‚Ä¶\nMod√®le en NAF 2008 entrain√© sur + 10 millions\nPerformance de fastText tr√®s d√©pendant du nombre de donn√©es d‚Äôentra√Ænement"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#donn√©es-√†-disposition",
    "href": "slides/grp-veille-codif-auto-9/index.html#donn√©es-√†-disposition",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "Donn√©es √† disposition",
    "text": "Donn√©es √† disposition\n\nStock Sirene 3 : \\(~10\\) millions obs. mais peu adapt√©es aux nouvelles donn√©es\nStock Sirene 4 : \\(~2.7\\) millions obs.\n\nUnivoques : \\(1.3\\) millions obs. et 504 sous-classes\nMultivoques : \\(1.4\\) millions obs. et 177 sous-classes\n\nCampagne d‚Äôannotation manuelle indispensable"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#campagne-dannotation",
    "href": "slides/grp-veille-codif-auto-9/index.html#campagne-dannotation",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "Campagne d‚Äôannotation",
    "text": "Campagne d‚Äôannotation\n\nLancement d‚Äôune campagne d‚Äôannotation depuis mi-2024\nPlateforme d√©velopp√©e par l‚Äô√©quipe m√©tier ü§î\nFocus sur les donn√©es multivoques uniques\nüéØ Objectif double :\n\nAttribuer un code NAF 2025 üöÄ\nV√©rifier la qualit√© du code NAF 2008 üó∏\n\n\nAujourd‚Äôhui, \\(~27k\\) donn√©es annot√©es‚Ä¶ insuffisant !"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#m√©thodologie",
    "href": "slides/grp-veille-codif-auto-9/index.html#m√©thodologie",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "M√©thodologie",
    "text": "M√©thodologie\n\nüéØ Objectif : Reconstruire un jeu d‚Äôentra√Ænement le plus exhaustif possible\nExp√©rimentation one-shot ‚û°Ô∏è pas de contrainte de reproductibilit√© ‚Ä¶ en production\nUtilisation de LLMs pour g√©n√©rer des annotations en NAF 2025\nDonn√©es √† disposition :\n\nStock Sirene 4 (\\(~2.7\\) millions d‚Äôobservations)\nTable de passage r√©alis√©e par les experts APE\nNotes explicatives de la NAF 2025\nAnnotations manuelles (\\(~27k\\) observations)"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#m√©thodologie-1",
    "href": "slides/grp-veille-codif-auto-9/index.html#m√©thodologie-1",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "M√©thodologie",
    "text": "M√©thodologie"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#tirer-profit-des-llms",
    "href": "slides/grp-veille-codif-auto-9/index.html#tirer-profit-des-llms",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "Tirer profit des LLMs",
    "text": "Tirer profit des LLMs\n\nRetrieval Augmented Generation (RAG) vs fine-tunning\n2 possibilit√©s :\n\nRAG avec les notes explicatives\n\n\nPas encore test√© üìù\n\n\nPseudo-RAG :\n\n\nRetriever manuel utilisant la table de passage\n\nüí° Id√©e g√©n√©rale ‚û°Ô∏è Fournir les donn√©es essentielles au LLM pour convertir les codes NAF 2008 vers 2025\n\n\n\n\nAvertissement\n\n\nL‚Äôid√©e n‚Äôest pas de construire un classifier, seulement cr√©er des annotations."
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#le-prompting",
    "href": "slides/grp-veille-codif-auto-9/index.html#le-prompting",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "Le prompting",
    "text": "Le prompting\n\nPrompt syst√®me identique pour toutes les observations\n\n\nAfficher le prompt syt√®me\n\nTu es un expert de la Nomenclature statistique des Activit√©s √©conomiques dans la Communaut√© Europ√©enne (NACE). Tu es charg√© de r√©aliser le changement de nomenclature. Ta mission consiste √† attribuer un code NACE 2025 √† une entreprise, en t'appuyant sur le descriptif de son activit√© et √† partir d'une liste de codes propos√©s (identifi√©e √† partir de son code NACE 2008 existant). Voici les instructions √† suivre :\n1. Analyse la description de l'activit√© principale de l'entreprise et le code NACE 2008 fourni par l'utilisateur.\n2. √Ä partir de la liste des codes NACE 2025 disponible, identifie la cat√©gorie la plus appropri√©e qui correspond √† l'activit√© principale de l'entreprise.\n3. Retourne le code NACE 2025 au format JSON comme sp√©cifi√© par l'utilisateur. Si la description de l'activit√© de l'entreprise n'est pas suffisamment pr√©cise pour identifier un code NACE 2025 ad√©quat, retourne `null` dans le JSON.\n4. √âvalue la coh√©rence entre le code NACE 2008 fourni et la description de l'activit√© de l'entreprise. Si le code NACE 2008 ne semble pas correspondre √† cette description, retourne `False` dans le champ `nace08_valid` du JSON. Note que si tu arrives √† classer la description de l'activit√© de l'entreprise dans un code NACE 2025, le champ `nace08_valid` devrait `True`, sinon il y a incoh√©rence.\n5. R√©ponds seulement avec le JSON compl√©t√© aucune autres information ne doit √™tre retourn√©.\n\nUn prompt sp√©cifique pour chaque observations comprenant :\n\nle libell√© de l‚Äôactivit√© principale de l‚Äôentreprise\nl‚Äôancien code NAF 2008 connu\nLa liste des codes possibles issues du mapping avec leurs notes explicatives\n\nUne instruction sur le format de r√©ponse attendu"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#qualifier-la-r√©ponse-g√©n√©r√©e",
    "href": "slides/grp-veille-codif-auto-9/index.html#qualifier-la-r√©ponse-g√©n√©r√©e",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "Qualifier la r√©ponse g√©n√©r√©e",
    "text": "Qualifier la r√©ponse g√©n√©r√©e\n\nTendance des LLMs a √™tre tr√®s volubiles‚Ä¶\nConstruction d‚Äôune r√©ponse type, claire et br√®ves dans un format sp√©cifique\nFormat JSON est le plus abondamment utilis√© dans l‚Äô√©cosyst√®me\n\n\n\nAfficher un exemple de r√©ponse attendue\n\n{\n    \"codable\": true,\n    \"nace_2008_valid\": true,\n    \"nace2025\": \"0147J\" \n}\n\n\nParsing de la r√©ponse :\n\nV√©rification du format\nContr√¥le des hallucinations"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#llms-utilis√©s",
    "href": "slides/grp-veille-codif-auto-9/index.html#llms-utilis√©s",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "LLMs utilis√©s",
    "text": "LLMs utilis√©s\n\n\n\n\n\n\n\n\n\n\nMod√®le\nTaille\nVitesse d‚Äôinf√©rence\nPerformance\nCaract√©ristique\n\n\n\n\nQwen 2.5\n32B\nLent\nBonnes performances\nTr√®s restrictif\n\n\nMinistral\n8B\nExtr√™mement rapide\nTr√®s raisonnable\nPas restrictif\n\n\nMistal Small\n44B\nLent\nBonnes performances\nAssez restrictif\n\n\nLlama 3.1\n70B (quantis√©)\nExtr√™mement lent\nTr√®s bonnes performances\nAssez restrictif"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#le-fl√©au-de-l√©valuation",
    "href": "slides/grp-veille-codif-auto-9/index.html#le-fl√©au-de-l√©valuation",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "Le fl√©au de l‚Äô√©valuation",
    "text": "Le fl√©au de l‚Äô√©valuation\n\n‚ùì Question cruciale :\n\nComment √©valuer un LLM ?\nClassification ‚û°Ô∏è plus facile, vraiment ?\nComplexit√© de la nomenclature\n\nUtilisation des \\(27k\\) annotations comme ground truth ü•á\n3 m√©triques de performances :\n\nPr√©cision totale\nPr√©cision parmi les ‚Äúcodables‚Äù\nPr√©cision ‚ÄúLLM‚Äù (erreurs imputables √† la g√©n√©ration seulement)"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#performance-des-mod√®les",
    "href": "slides/grp-veille-codif-auto-9/index.html#performance-des-mod√®les",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "Performance des mod√®les",
    "text": "Performance des mod√®les"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#reconstruction-du-jeu-multivoques",
    "href": "slides/grp-veille-codif-auto-9/index.html#reconstruction-du-jeu-multivoques",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "Reconstruction du jeu multivoques",
    "text": "Reconstruction du jeu multivoques\n\nüí°Principe : consid√©rer les LLMs comme des annotateurs classiques ‚û°Ô∏è X-annotation\n‚ùìPeut-on am√©liorer performances en mixant les r√©sultats de chaque mod√®les ?\nConstruction de 3 annotations suppl√©mentaires\n\nChoix en cascade (un mod√®le en priorit√©)\nChoix par vote √† la majorit√©\nChoix par vote pond√©r√©"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#combinaison-des-annotations",
    "href": "slides/grp-veille-codif-auto-9/index.html#combinaison-des-annotations",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "Combinaison des annotations",
    "text": "Combinaison des annotations"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#r√©-entrainement-en-naf-2025",
    "href": "slides/grp-veille-codif-auto-9/index.html#r√©-entrainement-en-naf-2025",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "R√©-entrainement en NAF 2025",
    "text": "R√©-entrainement en NAF 2025\n\nReconstruction du stock Sirene 4 en NAF 2025 (\\(~2\\) millions d‚Äôobservations)\nDistribution des donn√©es quasi-inchang√©es\nUtilisation de nouvelles variables propres √† Sirene 4\nPerformances similaires au mod√®le en NAF 2008"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#r√©-entrainement-en-naf-2025-1",
    "href": "slides/grp-veille-codif-auto-9/index.html#r√©-entrainement-en-naf-2025-1",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "R√©-entrainement en NAF 2025",
    "text": "R√©-entrainement en NAF 2025"
  },
  {
    "objectID": "slides/grp-veille-codif-auto-9/index.html#le-mod√®le-naf-2025",
    "href": "slides/grp-veille-codif-auto-9/index.html#le-mod√®le-naf-2025",
    "title": "Travaux sur le passage de la nomenclature NAF2008 Rev2.1 √† la NAF2025",
    "section": "Le mod√®le NAF 2025",
    "text": "Le mod√®le NAF 2025\n\nviewof activite = Inputs.text(\n  {label: '', value: 'coiffeur', width: 800}\n)\n\nviewof type_form = Inputs.text(\n  {label: 'Type de la liasse', value: 'X', width: 80}\n)\nurlApe = `https://codification-ape-dev.lab.sspcloud.fr/predict?description_activity=${activite}%20&type_form=${type_form}&event=01P&nb_echos_max=3&prob_min=0.0009`\n\nd3.json(urlApe).then( res =&gt; {\n  var IC, results;\n  ( {IC, ...results} = res )\n\n  IC = parseFloat(IC)\n\n  const rows = Object.values(results).map( obj =&gt; {\n    return `\n    &lt;tr&gt;\n      &lt;td&gt;${obj.code} | ${obj.libelle}&lt;/td&gt;\n      &lt;td&gt;${obj.probabilite.toFixed(3)}&lt;/td&gt;\n    &lt;/tr&gt;\n  `\n  }).join('')\n  \n  return html`\n  &lt;table&gt;\n    &lt;caption&gt;\n      Indice de confiance : ${IC.toFixed(3)}\n    &lt;/caption&gt;\n    &lt;tr&gt;\n      &lt;th style=\"text-align:center;\"&gt;Libell√© (NAF 2025)&lt;/th&gt;\n      &lt;th&gt;Probabilit√©&lt;/th&gt;\n    &lt;/tr&gt;\n      ${rows}\n  &lt;/table&gt;`\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { debounce } from \"@mbostock/debouncing-input\""
  }
]